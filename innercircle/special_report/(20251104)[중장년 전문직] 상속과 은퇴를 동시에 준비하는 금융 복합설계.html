<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>컨설팅 특급보고서 | [중장년 전문직] 상속과 은퇴를 동시에 준비하는 금융 복합 설계</title>
<link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
<style>
/* ================================================
    CSS 코드 (수정 완료)
    ================================================
*/
:root {
    --color-primary: #3b5bdb; --color-primary-dark: #2a41a8;
    --color-dark: #1e293b; --color-dark-accent: #334155;
    --color-text-primary: #334155; --color-text-secondary: #64748b;
    --color-light: #ffffff; --color-light-gray: #f8fafc; --color-border: #e2e8f0;
    --color-success: #10b981; --color-danger: #ef4444; --color-warning: #f59e0b;
    
    --highlight-yellow-bg: #fffbeb; --highlight-yellow-text: #b45309;
    --highlight-pink-bg: #fff1f2; --highlight-pink-text: #be123c;
    
    --font-family-base: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
    
    --spacing-xs: 4px; --spacing-sm: 8px; --spacing-md: 16px; --spacing-lg: 24px; --spacing-xl: 32px; --spacing-2xl: 48px;
    
    --radius-md: 8px; --radius-lg: 16px;
    
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.07), 0 2px 4px -2px rgba(0, 0, 0, 0.07);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -4px rgba(0, 0, 0, 0.08);
    --shadow-hover: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
}
* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
html { scroll-behavior: smooth; }
body {
    font-family: var(--font-family-base);
    font-size: 16px; line-height: 1.8; color: var(--color-text-primary); background: var(--color-light-gray);
    -webkit-font-smoothing: antialiased; word-break: keep-all;
}
.container {
    max-width: 1200px; margin: var(--spacing-2xl) auto; background: var(--color-light);
    border-radius: var(--radius-lg); box-shadow: var(--shadow-lg); overflow: hidden;
    border: 1px solid var(--color-border);
}
.header {
    background: linear-gradient(135deg, var(--color-dark) 0%, var(--color-dark-accent) 100%);
    padding: var(--spacing-xl) var(--spacing-xl); text-align: center; color: var(--color-light);
    border-bottom: 5px solid var(--color-primary);
}
.header .main-title {
    font-size: 2.4em;
    font-weight: 800;
    line-height: 1.3;
    letter-spacing: -1.5px;
    color: #e2e8f0;
    margin: 0 0 var(--spacing-sm) 0;
}
.header .report-title {
    font-size: 1.6em;
    font-weight: 700;
    color: #fcdf8d;
    margin: 0 0 var(--spacing-sm) 0;
}
.header .subtitle {
    font-size: 1.25em;
    opacity: 1;
    font-weight: 500;
    color: #cbd5e1;
    margin: 0;
}
.nav-tabs {
    background: var(--color-light); display: flex; overflow-x: auto; -webkit-overflow-scrolling: touch;
    scrollbar-width: none; position: sticky; top: 0; z-index: 1000;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05); border-bottom: 1px solid var(--color-border);
}
.nav-tabs::-webkit-scrollbar { display: none; }
.nav-tabs button {
    flex: 1; min-width: 120px; padding: var(--spacing-md); border: none; background: transparent; text-align: center;
    color: var(--color-text-secondary); cursor: pointer; font-size: 1em; font-weight: 600;
    transition: all .3s ease; border-bottom: 3px solid transparent; white-space: nowrap;
}
.nav-tabs button:hover { background-color: var(--color-light-gray); color: var(--color-primary-dark); }
.nav-tabs button.active { color: var(--color-primary); border-bottom-color: var(--color-primary); font-weight: 700; }
.content { padding: var(--spacing-2xl) var(--spacing-xl); }
.section { display: none; animation: fadeIn .6s ease-out; margin-bottom: var(--spacing-xl); }
.section.active { display: block; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
h2 {
    font-size: 2em; font-weight: 800; line-height: 1.4; letter-spacing: -1px; margin-bottom: var(--spacing-lg);
    padding-bottom: var(--spacing-md); border-bottom: 4px solid var(--color-primary); color: var(--color-dark);
}
h2:not(:first-of-type) { margin-top: var(--spacing-2xl); }
h3 {
    font-size: 1.6em; font-weight: 700; color: var(--color-dark-accent);
    margin: var(--spacing-xl) 0 var(--spacing-lg) 0;
}
h4 {
    font-size: 1.25em; font-weight: 700; color: var(--color-dark);
    margin: var(--spacing-lg) 0 var(--spacing-md) 0; display: flex; align-items: center; gap: var(--spacing-sm);
}
p { margin-bottom: var(--spacing-md); color: var(--color-text-primary); }
ul, ol { margin-left: var(--spacing-md); padding-left: var(--spacing-md); }
li { margin-bottom: var(--spacing-sm); }
.highlight-yellow { background-color: var(--highlight-yellow-bg); color: var(--highlight-yellow-text); font-weight: 700; padding: 2px 6px; border-radius: 4px; }
.highlight-pink { background-color: var(--highlight-pink-bg); color: var(--highlight-pink-text); font-weight: 700; padding: 2px 6px; border-radius: 4px; }
.key-point { color: var(--color-danger); font-weight: 700; }
.info-card, .table-wrapper, .accordion-item, .comparison-card, .dialogue-item, .scenario-title-box, .footer-notice, .kpi-card, .timeline-container, .visual-info-box {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.info-card:hover, .table-wrapper:hover, .accordion-item:hover, .comparison-card:hover, .dialogue-item:hover, .scenario-title-box:hover, .kpi-card:hover, .timeline-container:hover, .visual-info-box:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-hover);
}
.info-card {
    background: var(--color-light); border-radius: var(--radius-lg); padding: var(--spacing-lg);
    margin: var(--spacing-lg) 0; border: 1px solid var(--color-border);
    border-top: 4px solid var(--color-primary);
    box-shadow: var(--shadow-md);
}
.info-card--danger { border-top-color: var(--color-danger); }
.info-card--warning { border-top-color: var(--color-warning); }
.info-card--success { border-top-color: var(--color-success); }
.table-wrapper {
    overflow-x: auto; -webkit-overflow-scrolling: touch; margin: var(--spacing-lg) 0;
    border-radius: var(--radius-lg); border: 1px solid var(--color-border); box-shadow: var(--shadow-md);
}
table {
    width: 100%; min-width: 700px; border-collapse: collapse; background: var(--color-light); font-size: 1em;
}
th {
    background: var(--color-dark-accent); color: var(--color-light); padding: var(--spacing-md);
    text-align: left; font-weight: 600; white-space: nowrap; border-bottom: 3px solid var(--color-primary);
}
td {
    padding: var(--spacing-md); border-bottom: 1px solid var(--color-border); vertical-align: middle;
    color: var(--color-text-secondary);
}
tbody tr td:first-child { color: var(--color-text-primary); font-weight: 500; }
tbody tr { transition: background-color 0.2s ease; }
tbody tr:nth-child(even) { background-color: var(--color-light-gray); }
tbody tr:hover { background-color: #eef2ff; }
tr:last-child td { border-bottom: none; }
.table-caption {
    font-size: 0.9em;
    color: var(--color-text-secondary);
    text-align: right;
    margin-top: -var(--spacing-sm);
    padding-right: var(--spacing-sm);
}

.comparison-table { display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-xl); margin: var(--spacing-lg) 0; }
.comparison-card {
    padding: var(--spacing-lg); border-radius: var(--radius-lg);
    color: var(--color-light);
    box-shadow: var(--shadow-lg);
}
.comparison-card h4 {
    margin: 0 0 var(--spacing-md) 0; font-size: 1.5em; color: var(--color-light);
}
.comparison-card h4::before { font-size: 1.2em; font-weight: 800; }
.comparison-card ul { list-style: none; padding: 0; }
.comparison-card li { margin: var(--spacing-md) 0; line-height: 1.6; }
.comparison-card.before { background: linear-gradient(135deg, #f87171 0%, #dc2626 100%); }
.comparison-card.before h4::before { content: '❌'; }
.comparison-card.after { background: linear-gradient(135deg, #4ade80 0%, #16a34a 100%); }
.comparison-card.after h4::before { content: '✅'; }
.scenario-header {
    margin: var(--spacing-lg) 0 var(--spacing-ㅡmd) 0;
    border-left: 4px solid var(--color-border);
    padding-left: var(--spacing-lg);
}
.scenario-header p {
    margin: 0 0 var(--spacing-md) 0;
    font-size: 1.1em;
    display: flex;
    align-items: center;
    flex-wrap: wrap;
}
.scenario-header p:last-child {
    margin-bottom: 0;
}
.badge {
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: 99px;
    font-weight: 700;
    font-size: 0.9em;
    color: var(--color-light);
    margin-right: var(--spacing-md);
    white-space: nowrap;
}
.topic-badge {
    background-color: var(--color-primary);
}
.topic-text {
    color: var(--color-text-primary);
    font-weight: 600;
}
.scenario-step {
    font-size: 1.1em; color: var(--color-primary-dark); background-color: #eef2ff;
    padding: var(--spacing-sm) var(--spacing-md); border-radius: 99px;
    margin: var(--spacing-xl) 0 var(--spacing-md) 0; display: inline-block;
    font-weight: 700; box-shadow: var(--shadow-sm);
}
.dialogue-item {
    margin: var(--spacing-md) 0 var(--spacing-lg); padding: var(--spacing-md) var(--spacing-lg); border-radius: var(--radius-lg);
    position: relative; max-width: 90%; box-shadow: var(--shadow-md);
}
.dialogue-consultant { background: var(--color-light); border-left: 4px solid var(--color-primary); margin-right: auto; }
.dialogue-client { background: #fdf4ff; border-left: 4px solid #a855f7; margin-left: auto; }
.dialogue-label {
    font-weight: 700; color: var(--color-dark); margin-bottom: var(--spacing-sm); display: flex; align-items: center; gap: var(--spacing-sm);
}
.dialogue-label::before { font-size: 1.5em; }
.dialogue-consultant .dialogue-label::before { content: '💼'; }
.dialogue-client .dialogue-label::before { content: '👤'; }
.accordion { margin: var(--spacing-lg) 0; }
.accordion-item {
    border: 1px solid var(--color-border); border-radius: var(--radius-md);
    margin-bottom: var(--spacing-md); overflow: hidden; box-shadow: var(--shadow-md);
}
.accordion-header {
    width: 100%; background: var(--color-light); padding: var(--spacing-md) var(--spacing-lg); cursor: pointer;
    display: flex; justify-content: space-between; align-items: center; transition: background .3s ease;
    user-select: none; font-weight: 600; font-size: 1.05em; border: none; text-align: left; color: var(--color-dark-accent);
}
.accordion-header:hover { background: var(--color-light-gray); }
.accordion-header.active { background: var(--color-primary); color: var(--color-light); }
.accordion-icon { transition: transform .3s ease-in-out; font-size: 1.3em; font-weight: 700; }
.accordion-header.active .accordion-icon { transform: rotate(180deg); }
.accordion-content { max-height: 0; overflow: hidden; transition: max-height .4s ease-out; background: var(--color-light); }
.accordion-body { padding: var(--spacing-lg); border-top: 1px solid var(--color-border); }
.footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--spacing-lg);
    background: var(--color-dark-accent);
    color: #cbd5e1;
    padding: var(--spacing-lg) var(--spacing-xl);
    font-size: 1em;
    line-height: 1.7;
}
.footer-notice {
    flex: 1;
    min-width: 320px;
    background: var(--color-dark);
    border-radius: var(--radius-md);
    border: 1px solid #475569;
    padding: var(--spacing-md);
    margin: 0;
}
.footer-notice .notice-title {
    font-weight: 700;
    color: var(--color-warning);
    font-size: 1.1em;
    margin-bottom: var(--spacing-sm);
}
.footer-notice p {
    color: #94a3b8;
    font-size: 0.9em;
    margin: 0;
}
.footer-meta {
    flex-shrink: 0;
    text-align: right;
}
.footer-info p, .footer-copyright p {
    margin: 0;
    color: #94a3b8;
}
.footer-copyright {
    margin-top: var(--spacing-xs);
    font-size: 0.9em;
    opacity: 0.7;
}
.phone-link { color: var(--color-warning); text-decoration: none; font-weight: 600; }
.phone-link:hover { text-decoration: underline; color: #fbbf24; }

.visual-info-header {
    display: flex;
    align-items: center;
    background-color: var(--color-light-gray);
    padding: var(--spacing-md) var(--spacing-lg);
    font-size: 1.1em;
    font-weight: 700;
    color: var(--color-primary-dark);
    border-bottom: 1px solid var(--color-border);
}
.visual-info-body {
    padding: var(--spacing-lg);
}
.visual-info-body p { margin-bottom: var(--spacing-sm); }
.visual-info-body ul li {
    padding-left: var(--spacing-sm);
    position: relative;
}
.visual-info-body ul li::before {
    content: '✓';
    color: var(--color-primary);
    font-weight: 900;
    position: absolute;
    left: -1em;
}
.legal-doc-preview {
    background: var(--color-light-gray);
    border-left: 4px solid var(--color-primary);
    padding: var(--spacing-lg);
    border-radius: var(--radius-md);
    margin: var(--spacing-lg) 0;
}
.legal-doc-preview code {
    white-space: pre-wrap;
    font-family: 'Pretendard', monospace;
    font-size: 0.95em;
    color: var(--color-text-secondary);
    line-height: 1.7;
}
.gap-visualization {
    display: grid;
    gap: 16px;
}
.gap-labels { display: flex; justify-content: space-between; font-size: 0.9em; color: var(--color-text-secondary); margin-bottom: 4px; }
.gap-bar-bg { height: 16px; background: var(--color-light-gray); border-radius: 999px; overflow: hidden; border: 1px solid var(--color-border); }
.gap-bar { height: 100%; }

.one-pager-card p { font-size: 1.1em; line-height: 1.9; }
.one-pager-card b { color: var(--color-primary); }

.kpi-cards-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-lg);
    margin-top: var(--spacing-xl);
}
.kpi-card {
    background: linear-gradient(135deg, var(--color-dark-accent) 0%, var(--color-primary-dark) 100%);
    color: var(--color-light);
    padding: var(--spacing-lg);
    border-radius: var(--radius-lg);
    text-align: center;
    box-shadow: var(--shadow-md);
}
.kpi-card h4 {
    color: var(--color-light);
    opacity: 0.8;
    font-size: 1em;
    font-weight: 500;
    margin: 0 0 var(--spacing-sm) 0;
}
.kpi-value {
    font-size: 2.8em;
    font-weight: 800;
    line-height: 1.2;
    margin: 0;
    color: #fff;
}
.kpi-value small {
    font-size: 0.5em;
    font-weight: 600;
}
.kpi-subtitle {
    font-size: 0.9em;
    color: var(--color-light);
    opacity: 0.7;
    margin: var(--spacing-xs) 0 0 0;
}
.timeline-container {
    margin-top: var(--spacing-lg);
}
.timeline-stepper {
    display: flex;
    justify-content: space-between;
    position: relative;
    margin-bottom: var(--spacing-lg);
}
.timeline-stepper::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 10%;
    right: 10%;
    height: 3px;
    background-color: var(--color-border);
    transform: translateY(-50%);
    z-index: 1;
}
.step {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    position: relative;
    z-index: 2;
    width: 25%;
}
.step-circle {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: var(--color-light);
    border: 3px solid var(--color-border);
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: 700;
    font-size: 1.2em;
    color: var(--color-text-secondary);
    transition: all 0.3s ease;
}
.step.active .step-circle {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
    color: #fff;
}
.step-title {
    font-size: 0.9em;
    font-weight: 600;
    color: var(--color-text-secondary);
    margin-top: var(--spacing-sm);
}
.timeline-content {
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
}
.content-item:not(:last-child) {
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-md);
    border-bottom: 1px dashed var(--color-border);
}
.content-item strong {
    color: var(--color-primary-dark);
    font-size: 1.1em;
}
.content-item ol {
    margin-left: 0;
    padding-left: var(--spacing-md);
    font-size: 0.95em;
    color: var(--color-text-secondary);
    margin-top: var(--spacing-sm);
}
.content-item ol li {
    margin-bottom: var(--spacing-sm);
    padding-left: var(--spacing-xs);
}
.content-item ol li::marker {
    font-weight: 600;
    color: var(--color-primary);
}

.step-card-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--spacing-md);
    margin-top: var(--spacing-lg);
}
.step-card {
    background: var(--color-light);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
    overflow: hidden;
    display: flex;
    flex-direction: column;
}
.step-card-header {
    font-weight: 700;
    font-size: 1.1em;
    padding: var(--spacing-md) var(--spacing-lg);
    color: var(--color-light);
    background: var(--color-dark-accent);
}
.step-card ul {
    list-style: none;
    padding: var(--spacing-lg);
    margin: 0;
    display: grid;
    gap: var(--spacing-md);
    flex-grow: 1;
}
.step-card li {
    line-height: 1.6;
    font-size: 0.95em;
    margin: 0;
}
.step-card li label {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    cursor: pointer;
}
.step-card li input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: var(--color-primary);
    flex-shrink: 0;
}
.step-card-footer {
    font-size: 0.9em;
    color: var(--color-text-secondary);
    background: var(--color-light-gray);
    border-top: 1px solid var(--color-border);
    padding: var(--spacing-sm) var(--spacing-lg);
}

.waterfall-chart-container {
    background: var(--color-light-gray);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
    margin-top: var(--spacing-xl);
}
.waterfall-config {
    display: flex;
    gap: var(--spacing-sm) var(--spacing-md);
    flex-wrap: wrap;
    font-size: 0.9em;
    color: var(--color-text-secondary);
    margin-top: var(--spacing-lg);
    align-items: center;
}
.waterfall-config div {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}
.waterfall-config b {
    color: var(--color-text-primary);
    background: var(--color-light);
    border: 1px solid var(--color-border);
    padding: 2px 6px;
    border-radius: var(--radius-md);
    min-width: 50px;
    text-align: right;
}
.waterfall-config button {
    background: var(--color-primary);
    border: none;
    color: var(--color-light);
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-md);
    cursor: pointer;
    font-weight: 600;
    transition: background-color 0.2s;
    font-size: 0.9em;
}
.waterfall-config button:hover { background: var(--color-primary-dark); }
.waterfall-legend {
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
    margin-top: var(--spacing-md);
    font-size: 0.9em;
    color: var(--color-text-secondary);
}
.waterfall-legend span {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}
.legend-dot {
    width: 14px;
    height: 14px;
    display: inline-block;
    border-radius: 4px;
}

@media (max-width: 768px) {
    body { padding: 0; font-size: 15px; }
    .container { border-radius: 0; margin: 0; border: none; }
    .header { padding: var(--spacing-xl) var(--spacing-lg); }
    .header .report-title { font-size: 1.8em; }
    .header .subtitle { font-size: 1.1em; }
    .nav-tabs { min-width: 100%; }
    .nav-tabs button {
text-align: center;
        font-size: 0.9em;
        padding: var(--spacing-md) 10px;
    }
    .content { padding: var(--spacing-xl) var(--spacing-lg); }
    h2 { font-size: 1.6em; }
    h3 { font-size: 1.4em; }
    .dialogue-item { max-width: 95%; }
    .comparison-table { grid-template-columns: 1fr; }
    .timeline-stepper { flex-direction: column; align-items: flex-start; }
    .timeline-stepper::before { left: 20px; top: 20px; bottom: 20px; width: 3px; height: auto; transform: none; }
    .step { flex-direction: row; align-items: center; width: 100%; margin-bottom: var(--spacing-xl); }
    .step:last-child { margin-bottom: 0; }
    .step-circle { margin-right: var(--spacing-md); }
    .step-title { margin-top: 0; font-size: 1em; }
    .kpi-cards-container { grid-template-columns: 1fr; }
    .footer { flex-direction: column; align-items: center; }
    .footer-meta { width: 100%; text-align: center !important; }
    .step-card-grid { grid-template-columns: repeat(2, 1fr) !important; }
}

/* --- [신규 추가] 핵심 전략 박스 디자인 --- */
.strategy-box {
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    margin: var(--spacing-lg) 0;
    overflow: hidden;
    box-shadow: var(--shadow-sm);
}
.strategy-section {
    padding: var(--spacing-lg);
}
.strategy-section h5 {
    font-size: 1.15em;
    font-weight: 700;
    color: var(--color-dark-accent);
    margin: 0 0 var(--spacing-md) 0;
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}
.strategy-section h5 .icon {
    font-size: 1.3em;
}
.strategy-section p {
    margin-bottom: var(--spacing-sm);
    line-height: 1.7;
}
.strategy-section > :last-child {
    margin-bottom: 0;
}
.strategy-principle {
    background-color: var(--color-light);
}
.strategy-exception {
    background-color: #f0fdf4; /* Light green background */
}
.strategy-exception h5 {
   color: #15803d; /* Dark green */
}
.strategy-risk {
        background-color: #fff5f6; /* Light pink background - 수정: 아주 연하게 */
    }
 .strategy-risk h5 {
    color: #be123c; /* Dark pink */
}
.strategy-divider {
    border: none;
    border-top: 1px dashed var(--color-border);
    margin: 0;
}
.strategy-citation {
    font-size: 0.85em;
    color: var(--color-text-secondary);
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-sm);
    border-top: 1px solid var(--color-border);
}

/* --- [신규 추가] 전문가 최종 의견 박스 디자인 --- */
.expert-opinion-box {
    background-color: var(--color-light-gray);
    border-left: 5px solid var(--color-primary);
    padding: var(--spacing-lg);
    margin: var(--spacing-lg) 0;
    position: relative;
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-sm);
}
.expert-opinion-box .opinion-icon {
    font-size: 1.8em; /* 크기 살짝 조정 */
    position: absolute;
    top: var(--spacing-lg);
    left: var(--spacing-lg); /* ★ 수정: 왼쪽 패딩 안쪽으로 */
    line-height: 1;
    opacity: 0.7; /* ★ 추가: 살짝 투명하게 */
}
.expert-opinion-box p {
    margin-left: calc(var(--spacing-lg) + 1.8em + var(--spacing-sm)); /* ★ 수정: 아이콘 너비만큼 더 밀기 */
    margin-bottom: var(--spacing-md);
    font-style: italic;
    color: var(--color-text-primary);
    padding-left: var(--spacing-sm); /* 아이콘과 텍스트 사이 간격 */
}
 .expert-opinion-box p:last-child {
    margin-bottom: 0;
}
.expert-opinion-box .opinion-highlight {
    font-weight: 600;
    color: var(--color-primary-dark);
    background-color: #eef2ff; /* 연한 파란색 배경 */
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius-md);
    font-style: normal; /* 마지막 문단은 이탤릭체 제거 */
}

/* --- [신규 추가] 핵심 요약 리스트 스타일 --- */
.summary-list {
    list-style: none; /* 기본 점 제거 */
    padding-left: 1.5em; /* 들여쓰기 공간 확보 */
    margin: 0;
}
.summary-list li {
    position: relative;
    padding-left: 0; /* 내부 패딩 제거 */
    margin-bottom: var(--spacing-md); /* 항목 간 간격 */
    font-size: 1.1em;
    line-height: 1.9;
}
.summary-list li::before {
    content: '•'; /* 글머리기호 문자 */
    position: absolute;
    left: -1.5em; /* 들여쓰기 공간에 배치 */
    top: 0px;
    color: var(--color-primary); /* 글머리기호 색상 */
    font-weight: 700;
    font-size: 1.2em; /* 글머리기호 크기 */
}
 .summary-list li:last-child {
    margin-bottom: 0;
}
.summary-list b {
    color: var(--color-primary);
}

/* --- [최종 수정] 부록: 워터폴 시뮬레이터 스타일 --- */
.wf-simulator-container h4 { /* 시뮬레이터 내 제목 마진 조정 */
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-sm);
}
.wf-simulator-container h4:first-of-type {
    margin-top: 0;
}

.wf-input-grid, .wf-result-grid {
    display: grid;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}
.wf-input-grid {
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
}
@media (min-width: 992px) { .wf-input-grid { grid-template-columns: repeat(4, 1fr); } }
.wf-result-grid {
     grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
}
@media (min-width: 768px) { .wf-result-grid { grid-template-columns: repeat(3, 1fr); } }

.wf-field { display: flex; flex-direction: column; gap: var(--spacing-xs); }
.wf-field label { font-size: 0.9em; font-weight: 600; color: var(--color-text-secondary); }
.wf-field label small { font-weight: 400; font-size: 0.9em; color: #94a3b8; }
.wf-field input { width: 100%; background: var(--color-light-gray); border: 1px solid var(--color-border); color: var(--color-text-primary); padding: var(--spacing-sm); border-radius: var(--radius-md); font-size: 1em; }

/* 읽기 전용 결과 필드 */
.wf-field input.result-display {
    background: #e9ecef; color: var(--color-text-secondary); font-weight: 600;
    border-color: var(--color-border); /* 테두리 유지 */
    cursor: default;
    box-shadow: none; /* 그림자 제거 */
}
.wf-field input.result-gap { /* 부족액 강조 */
    color: var(--color-danger); border-color: #fecdd3; background: #fff1f2;
}

.wf-controls { display: flex; flex-wrap: wrap; gap: var(--spacing-sm); align-items: center; margin-bottom: var(--spacing-lg); }
.wf-controls button { background: var(--color-primary); border: none; color: var(--color-light); padding: var(--spacing-sm) var(--spacing-md); border-radius: var(--radius-md); cursor: pointer; font-weight: 600; transition: background-color 0.2s; font-size: 0.95em; }
.wf-controls button:hover { background: var(--color-primary-dark); }
.wf-controls button#wf-sim-dl { background: var(--color-dark-accent); }
.wf-controls button#wf-sim-dl:hover { background: var(--color-dark); }
.wf-controls button#wf-sim-draw-button { background-color: var(--color-success); }
.wf-controls button#wf-sim-draw-button:hover { background-color: #059669; }

/* 범례 */
.wf-simulator-legend { display: flex; gap: var(--spacing-md); flex-wrap: wrap; margin-bottom: var(--spacing-md); font-size: 0.9em; color: var(--color-text-secondary); }
.wf-simulator-legend .legend-item { display: flex; align-items: center; gap: var(--spacing-sm); }
.wf-simulator-legend .legend-dot { width: 14px; height: 14px; display: inline-block; border-radius: 4px; }
.wf-simulator-legend .base .legend-dot { background:#94a3b8; } /* 기준(total) */
.wf-simulator-legend .delta.neg .legend-dot { background:#ef4444; } /* 차감(delta neg) */
.wf-simulator-legend .delta.pos .legend-dot { background:#2563eb; } /* 증가(delta pos) */

/* SVG 컨테이너 및 SVG */
.wf-simulator-svg-container {
     width: 100%;
     background: #f8fafc;
     border: 1px solid var(--color-border);
     border-radius: var(--radius-md);
     padding: var(--spacing-sm); /* 내부 여백 살짝 */
}
#wf-simulator-svg {
    display: block; /* block 요소로 변경 */
    width: 100%;    /* 컨테이너 너비에 맞춤 */
    height: 360px;  /* 고정 높이 */
    overflow: visible; /* 잘림 방지 */
}

/* 요약 텍스트 */
.wf-summary-text { margin-top: var(--spacing-md); font-size: 1.05em; color: var(--color-text-primary); text-align: center; font-weight: 500; background: var(--color-light-gray); padding: var(--spacing-sm) var(--spacing-md); border-radius: var(--radius-md); }
.wf-summary-text b { color: var(--color-dark-accent); font-weight: 700; }
.wf-summary-text b.gap-amount { color: #dc2626; }

/* --- [신규 추가] 워터폴 차트 모바일 스크롤 --- */
.waterfall-scroll-wrapper {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    margin: var(--spacing-xl) 0;
}
.waterfall-scroll-wrapper .waterfall-chart-container,
.waterfall-scroll-wrapper .simulation-card { /* ★ 시뮬레이터 카드도 마진 제거 */
    margin-top: 0;
    margin-bottom: 0;
}

/* --- [최종 수정] 워터폴 차트 내부 가로 스크롤 (Table 방식) --- */

/* 1. 정적 차트 컨테이너에 스크롤 적용 */
.waterfall-chart-container {
    overflow-x: auto; /* 내용 넘치면 가로 스크롤 */
    -webkit-overflow-scrolling: touch; /* iOS 부드러운 스크롤 */
    /* 기존 padding, background 등은 유지 */
}

/* 2. 시뮬레이터 SVG 컨테이너에 스크롤 적용 */
.wf-simulator-svg-container {
    overflow-x: auto; /* 내용 넘치면 가로 스크롤 */
    -webkit-overflow-scrolling: touch; /* iOS 부드러운 스크롤 */
    /* 기존 background, border 등은 유지 */
    padding: var(--spacing-sm) 0; /* 좌우 스크롤 여유 공간 */
}

/* 3. SVG 요소 자체에 최소 너비 지정 (스크롤 발생 조건) */
#wf-svg-static {
    min-width: 600px; /* 정적 차트 최소 너비 */
    display: block; /*너비 적용 위해 block으로*/
}
#wf-simulator-svg {
    min-width: 700px; /* 시뮬레이터 차트 최소 너비 */
    display: block;
}

/* 4. (옵션) 스크롤바 디자인 (webkit 브라우저용) */
.waterfall-chart-container::-webkit-scrollbar,
.wf-simulator-svg-container::-webkit-scrollbar {
    height: 8px; /* 스크롤바 높이 */
}
.waterfall-chart-container::-webkit-scrollbar-thumb,
.wf-simulator-svg-container::-webkit-scrollbar-thumb {
    background-color: var(--color-border); /* 스크롤바 색상 */
    border-radius: 4px; /* 둥근 모서리 */
}
.waterfall-chart-container::-webkit-scrollbar-track,
.wf-simulator-svg-container::-webkit-scrollbar-track {
    background-color: var(--color-light-gray); /* 스크롤바 배경 */
}

@media print { .no-print{display:none!important} }

/* 인쇄 시 제외 클래스 (기존에 없을 경우 추가) */
@media print { .no-print{display:none!important} }

@media (max-width: 520px) {
    .step-card-grid { grid-template-columns: 1fr !important; }
}
.info-card h4 { margin-top: 0; }
.info-card > :last-child { margin-bottom: 0; }
@media (prefers-reduced-motion: reduce) { * { animation: none !important; transition: none !important; scroll-behavior: auto !important; } }
:focus-visible { outline: 3px solid var(--color-primary); outline-offset: 2px; border-radius: 6px; }
.nav-tabs button:focus-visible { box-shadow: 0 0 0 3px rgba(59,91,219,.25); }
@media print { .nav-tabs, .footer, .accordion-icon { display: none !important; } .container { box-shadow: none; border: none; margin: 0; } body { background: #fff; } a[href^="tel"]:after { content: " (" attr(href) ")"; font-size: .9em; color:#64748b; } }

</style>
</head>
<body>

<div class="container">
    <header class="header">
        <h1 class="report-title">고객의 안정된 미래를 위한 재무안전망 구축</h1>
        <p class="main-title">『컨설팅 특급보고서』</p>
        <p class="subtitle">[중장년 전문직] 상속과 은퇴를 동시에 준비하는 금융 복합 설계</p>
    </header>

<nav class="nav-tabs" role="tablist" aria-label="보고서 섹션 탭">
<button class="active" onclick="showSection(0)">시작하기</button>
<button onclick="showSection(1)">고객 프로필</button>
<button onclick="showSection(2)">제안서 요약</button>
<button onclick="showSection(3)">정밀 진단</button>
<button onclick="showSection(4)">솔루션 제안</button>
<button onclick="showSection(5)">기대효과 및 요약</button>
<button onclick="showSection(6)">상담 가이드</button>
<button onclick="showSection(7)">부록</button>
</nav>

    <main class="content">
        <section class="section active">
            <h2>💡 자료 읽기에 앞서</h2>
            <p>고소득 전문직 고객분들은 이미 경제적 성공을 이루셨습니다. 따라서 이분들에게 필요한 것은 단순한 재테크 정보나 질병 보장이 아닙니다. 이분들의 가장 깊은 고민은 '어떻게 하면 내가 평생 이룬 자산을 온전히 보존하여, 다음 세대에게 평화롭게 물려줄 수 있을까?' 와 '언제까지 일할 수 있을까, 은퇴 후에도 지금의 품위를 유지할 수 있을까?' 라는 두 가지로 귀결됩니다.</p>
            <p>본 보고서는 이 두 가지 핵심 질문에 대한 가장 현실적이고 강력한 해법을 제시하기 위해 설계되었습니다. 우리는 '종신보험'을 단순히 사망 시 나오는 보험금으로 접근하는 낡은 시각에서 벗어나, 한 사람의 인생 주기 전체를 아우르는 금융의 '허브(Hub)' 로서 재해석합니다.</p>
            <div class="info-card">
                <h4>⭐ 보고서의 핵심 전략</h4>
                <p>보고서의 핵심 전략은 다음과 같습니다. 살아생전에는 종신보험의 쌓여가는 적립금을 <span class="highlight-yellow">'안정적 노후 연금 재원'</span> 으로 활용하여 품격 있는 노후를 준비하고, 사후에는 여기서 나오는 사망보험금을 <strong>'상속재산 과세제외 구조의 현금 확보 수단'</strong>으로 활용하여 자녀들이 부동산 등 핵심 자산을 헐값에 매각하지 않고도 상속세를 완납할 수 있도록 하는 것입니다.</p>
                <p style="margin-bottom: 0;">이를 위해 예상 상속세액을 정밀하게 계산하고, 자녀 명의로 보험을 계약하되 실질적 납입능력을 입증하여 보험금이 상속재산에 합산되지 않도록 설계하는 구체적인 방법론, 그리고 자녀의 보험료 납입 재원을 마련하기 위한 <strong>적법한 증여 절차와 증빙 체계</strong>까지, 실행 가능한 모든 전략을 상세히 담았습니다.</p>
            </div>
        </section>
        
        <section class="section">
            <h2>I. 고객 프로필 및 재무상황 분석 (Client Discovery)</h2>
            <h3>1. 고객 프로필 (가상 고객)</h3>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>구분</th>
                            <th>내용</th>
                            <th>비고 (컨설팅 시사점)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>성명</strong></td>
                            <td>박서준 (가명)</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td><strong>연령</strong></td>
                            <td>만 58세</td>
                            <td><strong>은퇴(7~10년 후)와 상속 계획이 시급한 시점</strong></td>
                        </tr>
                        <tr>
                            <td><strong>직업</strong></td>
                            <td>강남 소재 성형외과 대표원장</td>
                            <td>고소득 전문직의 대표적 모델. 높은 소득과 자산 규모</td>
                        </tr>
                        <tr>
                            <td><strong>라이프스타일</strong></td>
                            <td>주 2회 골프, 미술품 수집 등 높은 수준의 소비</td>
                            <td>은퇴 후에도 현재의 라이프스타일을 유지하고자 하는 니즈가 강함</td>
                        </tr>
                        <tr>
                            <td><strong>가족 구성</strong></td>
                            <td>배우자(만 55세, 전업주부)<br>장남(만 28세, 의학전문대학원생)<br>장녀(만 25세, MBA 유학 중)</td>
                            <td>자녀들은 아직 경제적 자립이 완전하지 않아, 보험료 납입 재원 마련을 위한 <strong>'적법한 증여'</strong> 플랜이 병행되어야 함</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <h3>2. 재무 현황 분석 (2025년 10월 기준)</h3>
            <h4>[자산·부채 구조]</h4>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>구분</th>
                            <th>항목</th>
                            <th>금액 (원)</th>
                            <th>비고</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td rowspan="6"><strong>자산</strong></td>
                            <td>병원 건물 (본인 명의)</td>
                            <td>5,000,000,000</td>
                            <td>핵심 상속 자산. 비유동성 자산.</td>
                        </tr>
                        <tr>
                            <td>거주 아파트 (공동명의, 본인 지분)</td>
                            <td>1,500,000,000</td>
                            <td>전체 30억 중 본인 지분 15억</td>
                        </tr>
                        <tr>
                            <td>금융 자산 (예금, 펀드 등)</td>
                            <td>2,000,000,000</td>
                            <td><strong>유일한 유동성 자산</strong></td>
                        </tr>
                        <tr>
                            <td>기타 (미술품, 회원권)</td>
                            <td>500,000,000</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>소계 (본인 명의 자산)</td>
                            <td>9,000,000,000</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>간주상속재산 (예정)</td>
                            <td>1,000,000,000</td>
                            <td>사망보험금 등</td>
                        </tr>
                        <tr style="background:var(--color-light-gray); font-weight:bold;">
                            <td colspan="2" style="color:var(--color-primary-dark)">총 상속예정재산</td>
                            <td style="color:var(--color-primary-dark)">10,000,000,000</td>
                            <td style="color:var(--color-primary-dark)"><span class="highlight-pink">자산의 약 70%가 부동산에 편중</span></td>
                        </tr>
                        <tr>
                            <td><strong>부채</strong></td>
                            <td>없음</td>
                            <td>0</td>
                            <td></td>
                        </tr>
                        <tr style="background:var(--color-light-gray); font-weight:bold;">
                            <td colspan="2"><strong>순자산</strong></td>
                            <td>9,000,000,000</td>
                            <td>본인 명의 순자산 기준</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h4>[현금 흐름 구조]</h4>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>구분</th>
                            <th>항목</th>
                            <th>월 금액 (원)</th>
                            <th>비고</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td rowspan="3"><strong>수입</strong></td>
                            <td>병원 소득 (세후)</td>
                            <td>50,000,000</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>임대 소득 (병원 건물)</td>
                            <td>20,000,000</td>
                            <td></td>
                        </tr>
                        <tr style="background:var(--color-light-gray); font-weight:bold;">
                            <td>총 수입</td>
                            <td>70,000,000</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td rowspan="3"><strong>지출</strong></td>
                            <td>생활비 및 품위유지비</td>
                            <td>25,000,000</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>자녀 지원 (학비, 생활비)</td>
                            <td>15,000,000</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>저축 및 투자</td>
                            <td>20,000,000</td>
                            <td></td>
                        </tr>
                        <tr style="background:var(--color-light-gray); font-weight:bold;">
                            <td colspan="2" style="color:var(--color-primary-dark)">월 잉여 자금</td>
                            <td style="color:var(--color-primary-dark)">10,000,000</td>
                            <td style="color:var(--color-primary-dark)"><span class="highlight-yellow">전략적 자산 포트폴리오 조정에 활용 가능</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>3. 인생 목표 및 리스크 분석</h3>
            <div class="info-card">
                <ul>
                    <li><strong>중기 목표 (~10년):</strong> 68세경 병원을 후배에게 양도하고 명예롭게 은퇴.</li>
                    <li><strong>장기 목표 (은퇴 후):</strong> 배우자와 함께 <strong>매월 1,000만 원 이상</strong>의 현금흐름으로 여유로운 노후 생활.</li>
                </ul>
            </div>
            <div class="info-card info-card--danger">
                <h4>핵심 리스크</h4>
                <ul>
                    <li><strong>상속 리스크:</strong> <span class="highlight-pink">막대한 상속세 부담.</span> 상속세 납부 재원 부족으로 자녀들이 병원 건물을 <strong>급매</strong>해야 하는 최악의 상황 발생 가능.</li>
                    <li><strong>노후 리스크:</strong> 은퇴 후 병원 소득이 중단되었을 때, 현재의 금융자산만으로는 원하는 수준의 현금흐름을 창출하기 어려움.</li>
                    <li><strong>자산 편중 리스크:</strong> 자산 대부분이 부동산에 묶여있어, 긴급 자금 필요 시 <strong>유동성 확보</strong>가 어려움.</li>
                </ul>
            </div>
        </section>

        <section class="section">
            <h2>II. 제안서 요약 (Executive Summary)</h2>
             <div class="table-wrapper">
                <table style="min-width: 0;">
                    <tbody>
                        <tr>
                            <td style="width:20%; font-weight:bold;">핵심 재무과제</td>
                            <td><strong>예상 상속세 <b style="color:#d9480f;">약 39.2억 원</b>에 대한 '현금' 납부 재원 부족</strong><br>원장님 사후, 자녀들은 6개월 내에 약 39.2억 원의 세금을 현금으로 납부해야 합니다. 현재의 금융자산 20억 원을 모두 사용해도 <span class="highlight-pink">약 19.2억이 부족</span>하며, 이는 결국 평생의 심혈을 기울여 이룩하신 병원 건물을 헐값에 매각해야 하는 비극으로 이어질 수 있습니다.</td>
                        </tr>
                        <tr>
                            <td style="font-weight:bold;">솔루션 요약</td>
                            <td><strong>'상속세 재원 플랜'과 '은퇴 연금 플랜'을 결합한 종신보험 솔루션</strong><br><br>
                                1. (상속) 자녀를 계약자 및 수익자로 하여 사망보험금 25억 원의 종신보험에 가입, 상속세 납부용 <span class="highlight-yellow"><strong>'상속재산 과세제외 구조의 현금'</strong></span>을 마련합니다.<br>
                                2. (증여) 자녀의 보험료 납입 재원은 적법한 증여신고 및 자금이체 증빙을 통해 자녀의 실질적 납입능력을 입증합니다.<br>
                                3. (은퇴) 은퇴 시점에는 쌓여있는 보험의 적립금을 연금으로 전환하여 안정적인 노후 현금흐름을 확보합니다.
                            </td>
                        </tr>
                        <tr>
                            <td style="font-weight:bold;">기대 변화</td>
                            <td><strong>'자산 보존'과 '안정된 노후'라는 두 마리 토끼를 동시에 잡는 최적의 금융 설계</strong><br><br>
                                • <strong>재무적:</strong> 상속세 문제의 실질적 해결로 병원 건물을 온전히 보존하며, 은퇴 후 매월 <span class="highlight-yellow">월 500~650만 원 수준</span>(일반형 기준 약 600만 원)의 안정적 평생 연금을 수령하는 기반을 마련합니다.<br>
                                • <strong>심리적:</strong> 미래의 가장 큰 두 가지 불안(상속, 노후)을 현재 시점에 해결함으로써, 가업과 자산에 대한 자부심을 느끼며 남은 인생을 온전히 즐길 수 있게 됩니다.
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="kpi-cards-container">
                <div class="kpi-card">
                    <h4>목표 사망보험금</h4>
                    <p class="kpi-value">25<small>억원</small></p>
                    <p class="kpi-subtitle">과세제외 현금 확보</p>
                </div>
                <div class="kpi-card">
                    <h4>월 납입 보험료</h4>
                    <p class="kpi-value">1,400<small>만원</small></p>
                    <p class="kpi-subtitle">10년 납 (자녀 명의)</p>
                </div>
                <div class="kpi-card">
                    <h4>연간 납부 증여세</h4>
                    <p class="kpi-value">~1,460<small>만원</small></p>
                    <p class="kpi-subtitle">적법한 자금출처 확보</p>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>III. 재무·보장자산 정밀 진단 (In-depth Diagnosis)</h2>
            <h3>1. 금융 포트폴리오 분석</h3>
            <div class="info-card info-card--warning">
                <h4>[총평] 유동성 부족 및 자산 편중</h4>
                <p style="margin:0;">자산 규모는 매우 크나, 부동산 등 실물 자산에 지나치게 편중되어 있습니다. 이는 자산가치 상승에는 유리할 수 있으나, 상속세 납부나 은퇴 후 현금흐름 창출과 같이 <span class="highlight-pink">'유동성'이 핵심인 재무 목표 달성에는 매우 취약한 구조</span>입니다.</p>
            </div>

            <h3>2. 기가입 보험 평가</h3>
            <div class="info-card info-card--success">
                <h4>잘된 점 (칭찬)</h4>
                <p style="margin:0;">실손의료보험과 기본적인 암보험에 가입되어 있어, 질병 치료비에 대한 최소한의 대비는 되어 있습니다.</p>
            </div>
            <div class="info-card info-card--warning">
                <h4>부족한 점 (보완)</h4>
                <p style="margin:0;">현재 가입된 보험은 모두 '소비성' 보장에 그쳐있습니다. 원장님과 같은 자산가에게는 보장 기능을 넘어 <strong>자산 이전과 절세 전략의 도구</strong>로 활용될 수 있는 <span class="highlight-yellow">'전략적 보험 포트폴리오'</span>가 전무한 상태입니다.</p>
            </div>

            <h3>3. 보장 갭(Gap) 진단: 상속세 리스크 정밀 분석</h3>
            <p>원장님 사후를 가정하여 예상 상속세를 시뮬레이션해 보겠습니다.</p>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>구분</th>
                            <th>금액 (원)</th>
                            <th>산출 근거</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>총 상속재산가액</strong></td>
                            <td>10,000,000,000</td>
                            <td>본인 명의 부동산(50억) + 아파트 지분(15억) + 금융자산(20억) + 기타자산(5억) + 간주상속재산(10억)</td>
                        </tr>
                        <tr>
                            <td><strong>공제액 합계</strong></td>
                            <td>(1,000,000,000)</td>
                            <td>배우자공제(최소 5억) + 일괄공제(5억)</td>
                        </tr>
                        <tr style="background:var(--color-light-gray);">
                            <td><strong>상속세 과세표준</strong></td>
                            <td>9,000,000,000</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td><strong>산출세액</strong></td>
                            <td>4,040,000,000</td>
                            <td>(90억 × 50%) - 4.6억 = 40.4억</td>
                        </tr>
                        <tr>
                            <td><strong>세대생략 할증(자녀)</strong></td>
                            <td>-</td>
                            <td>해당 없음</td>
                        </tr>
                        <tr>
                            <td><strong>신고세액공제 (3%)</strong></td>
                            <td>(121,200,000)</td>
                            <td>40.4억 × 3%</td>
                        </tr>
                        <tr style="background:var(--color-light-gray); font-weight:bold;">
                            <td style="color:var(--color-primary-dark)"><strong>예상 자진납부 상속세</strong></td>
                            <td style="color:var(--color-primary-dark)">3,918,800,000</td>
                            <td style="color:var(--color-primary-dark)"><strong>약 39.2억</strong></td>
                        </tr>
                        <tr>
                            <td><strong>현재 준비된 현금</strong></td>
                            <td>2,000,000,000</td>
                            <td>금융 자산</td>
                        </tr>
                        <tr style="background:#fff1f2; font-weight:bold;">
                            <td style="color:var(--highlight-pink-text)"><strong>부족한 상속세 재원 (GAP)</strong></td>
                            <td style="color:var(--highlight-pink-text)">(1,918,800,000)</td>
                            <td style="color:var(--highlight-pink-text)"><span class="highlight-pink">약 19.2억 원의 현금 부족</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p class="table-caption">※ 배우자공제 ‘최소 5억’ 가정</p>

            <div class="info-card info-card--danger">
                <h4>[전문가 의견]</h4>
                <p style="margin:0;">시뮬레이션 결과, 자녀들은 <strong>최소 약 19.2억 원</strong>의 상속세를 마련하기 위해 원장님의 금융자산을 모두 처분하고도 추가 자금을 마련해야 합니다. 결국 남은 선택지는 <strong>병원 건물을 매각</strong>하는 것뿐입니다. 이는 단순히 세금을 내는 문제를 넘어, <span class="highlight-pink">원장님께서 평생 이룩하신 가업의 존속 자체를 위협하는 심각한 재무적 재앙</span>입니다.</p>
            </div>

<div class="waterfall-scroll-wrapper">
            <div class="waterfall-chart-container">
                <h4 style="margin-top: 0; margin-bottom: var(--spacing-sm);">📊 상속세 GAP 워터폴 차트 (사례)</h4>
                <p style="margin: 0;">최종 세액(39.19억) 대비 보유 현금(20억)의 부족분(19.19억)을 시각적으로 보여줍니다.</p>
<svg id="wf-svg"" viewBox="0 0 800 260" width="100%" height="260"
         role="img" aria-label="상속세 GAP 워터폴 차트 (사례)"
         style="width:100%; height:auto; margin-top: var(--spacing-md); min-width: 600px;"></svg>
                
                <div class="waterfall-legend">
                    <span><span class="legend-dot" style="background:#7b8794;"></span>과세표준</span>
                    <span><span class="legend-dot" style="background:#f59f00;"></span>산출세액</span>
                    <span><span class="legend-dot" style="background:#2fb344;"></span>공제</span>
                    <span><span class="legend-dot" style="background:#228be6;"></span>최종세액</span>
                    <span><span class="legend-dot" style="background:#15aabf;"></span>보유현금</span>
                    <span><span class="legend-dot" style="background:#fa5252;"></span>부족액(GAP)</span>
                </div>

                <div id="wf-config" class="waterfall-config" style="display:none;">
                    <div>과세표준: <b data-id="taxBase">90</b> 억</div>
                    <div>산출세액: <b data-id="grossTax">40.4</b> 억</div>
                    <div>신고세액공제: <b data-id="credit">1.212</b> 억</div>
                    <div>최종세액: <b data-id="netTax">39.188</b> 억</div>
                    <div>보유현금: <b data-id="cash">20</b> 억</div>
                    <div>부족액: <b data-id="gap">19.188</b> 억</div>
                </div>
            </div>
</div>

        </section>

        <section class="section">
            <h2>IV. 맞춤형 솔루션 제안 (Customized Solution)</h2>
            <h3>1. 설계 방향 및 원칙</h3>
            <div class="info-card">
                <ul>
                    <li><strong>원칙 1 (상속세 재원 확보):</strong> 부족한 상속세 재원만큼을 <span class="highlight-yellow"><strong>'상속재산 과세제외 구조의 현금'</strong></span>으로 준비한다.</li>
                    <li><strong>원칙 2 (노후 현금흐름 창출):</strong> 상속 준비 과정에서 쌓이는 재원을 활용하여 <strong>'안정적 평생 연금'</strong>으로 전환할 수 있는 구조를 설계한다.</li>
                    <li><strong>원칙 3 (절세 극대화):</strong> 모든 과정은 상속세 및 증여세법이 허용하는 범위 내에서 합법적인 절세 효과를 극대화하는 방향으로 진행한다.</li>
                    <li><strong>원칙 4 (입증 가능성 확보):</strong> 자녀의 실질적 납입능력을 입증할 수 있도록 <strong>증여신고, 자금이체 증빙</strong> 등 적법한 절차를 철저히 이행한다.</li>
                </ul>
            </div>
            
            <h3>2. 포트폴리오 리모델링: 종신보험을 활용한 복합 금융 설계</h3>
<h4 style="margin-bottom: var(--spacing-sm);">🎯 핵심 전략: 계약 구조 설계를 통해 보험금을 상속재산에서 제외</h4>
<div class="strategy-box">
    <div class="strategy-section strategy-principle">
        <h5><span class="icon">🛡️</span> 원칙: 상속재산 포함</h5>
        <p>피상속인(부모)의 사망으로 받는 생명보험금은 <strong>원칙적으로 상속재산</strong>으로 봅니다.</p>
        <p class="strategy-citation">※ 근거: 상속세 및 증여세법 제8조 (상속재산으로 보는 보험금) (2025.10 기준)</p>
    </div>
    <hr class="strategy-divider">
    <div class="strategy-section strategy-exception">
        <h5><span class="icon">✅</span> 예외: 상속재산 제외 (핵심 구조)</h5>
        <p><strong>계약자(보험료 납부자)와 수익자가 모두 상속인(자녀)</strong>이고, 피보험자만 피상속인(부모)인 경우, 해당 보험금은 상속인의 고유재산으로 보아 상속재산에 포함되지 않습니다.</p>
        <p style="text-align: center; margin-top: var(--spacing-md); font-weight: 600;">
            <span style="background: var(--color-light-gray); padding: var(--spacing-xs) var(--spacing-md); border-radius: var(--radius-md); border: 1px solid var(--color-border); color: var(--color-primary-dark);">
            계약자(자녀) = 수익자(자녀) ≠ 피보험자(부모)
            </span>
        </p>
    </div>
    <hr class="strategy-divider">
    <div class="strategy-section strategy-risk">
        <h5><span class="icon">⚠️</span> 핵심 리스크 및 대응</h5>
        <p>단, 자녀가 보험료를 납부할 능력이 없음이 명백한데도 자녀를 계약자로 할 경우, 사실상 부모가 납부한 것으로 보아 과세당국이 상속재산으로 간주할 위험이 있습니다.</p>
        <p style="margin-top: var(--spacing-md);"><strong class="key-point">⭐ 필수 대응:</strong> <span class="highlight-pink"><strong>자녀의 납입 능력 입증 (적법한 증여신고 및 자금이체 경로 확보)</strong></span></p>
    </div>
</div>
            
            <h3>3. 최종 제안 설계안 (현실적 수정안)</h3>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>구분</th>
                            <th>설계 내용</th>
                            <th>비고</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>상품 유형</strong></td>
                            <td><span class="highlight-yellow">저해지환급형 종신보험</span> (납입 완료 후 환급률 상승)</td>
                            <td>보험료 부담은 낮추고, 적립 기능은 강화</td>
                        </tr>
                        <tr>
                            <td><strong>피보험자</strong></td>
                            <td>박서준 원장 (부)</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td><strong>계약자</strong></td>
                            <td><strong>장남 박진우 (자)</strong></td>
                            <td><strong>보험료 납부의 주체</strong></td>
                        </tr>
                        <tr>
                            <td><strong>사망 시 수익자</strong></td>
                            <td><strong>장남 박진우 (자)</strong></td>
                            <td><strong>상속세 납부 재원 수령</strong></td>
                        </tr>
                        <tr>
                            <td><strong>사망보험금</strong></td>
                            <td><strong>2,500,000,000원</strong></td>
                            <td>부족한 상속세 재원을 상회하는 금액</td>
                        </tr>
                        <tr>
                            <td><strong>납입 기간/금액</strong></td>
                            <td><strong>10년 납 / 월 1,400만 원</strong><br>(연 1억 6,800만 원)</td>
                            <td>58세 기준 현실적 보험료 수준<br>소득이 높은 기간에 납입 완료</td>
                        </tr>
                        <tr>
                            <td><strong>총 납입보험료</strong></td>
                            <td>약 16억 8천만 원</td>
                            <td>10년간 총 납입액</td>
                        </tr>
                        <tr>
                            <td><strong>예상 적립금</strong></td>
                            <td>68세 시점 약 18억 원±20%</td>
                            <td>보험사 및 상품에 따라 변동</td>
                        </tr>
                        <tr>
                            <td><strong>납입 재원 마련</strong></td>
                            <td>매년 1억 6,800만 원을 장남에게 사전 증여</td>
                            <td><span class="highlight-pink"><strong>증여세 신고 및 납부 필수</strong></span><br><strong>자금이체 경로 증빙 확보</strong></td>
                        </tr>
                        <tr>
                            <td><strong>연간 증여세</strong></td>
                            <td><strong>약 1,460만 원</strong></td>
                            <td>(1.68억 - 5천만 원 공제) × 20% - 누진공제 1천만 원</td>
                        </tr>
                        <tr>
                            <td><strong>10년 총 증여세</strong></td>
                            <td>약 1억 4,600만 원</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td><strong>연금 전환 기능</strong></td>
                            <td>원장님 은퇴 시점(68세)에 예상 해지환급금(약 18억 원)을 연금으로 전환 가능</td>
                            <td><span class="highlight-yellow">월 500~650만 원 수준 평생 연금 수령 가능</span>(일반형 기준, 보증 옵션 선택 시 하향 조정)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <h3>4. 제안 이유 (Rationale)</h3>
            <div class="info-card">
                <ul>
                    <li><strong>실질적 상속세 방어:</strong> 이 플랜이 실행되면, 원장님 사후에 장남은 상속세 과세 대상이 아닌 <strong>현금 25억 원</strong>을 즉시 수령하게 됩니다. 이를 통해 단 하루의 지체 없이 상속세를 완납하고, 병원 건물을 비롯한 모든 자산을 온전히 지킬 수 있습니다.</li>
                    <li><strong>하나의 상품, 두 개의 지갑:</strong> 살아계실 때는 든든한 <span class="highlight-yellow"><strong>'안정적 연금 재원'</strong></span>이 되고, 떠나실 때는 가족을 지키는 <span class="highlight-yellow"><strong>'상속재산 과세제외 구조의 현금 확보 수단'</strong></span>이 되는 가장 효율적인 복합 솔루션입니다.</li>
                    <li><strong>통제 가능한 증여:</strong> 매년 증여세(약 1,460만 원)를 납부하는 것은, 향후 수십억 원의 상속세를 내거나 자산을 헐값에 파는 것에 비하면 <strong>매우 저렴하고 합리적인 비용</strong>입니다. 이는 '통제 불가능한 미래의 세금'을 <span class="highlight-yellow">'통제 가능한 현재의 비용'</span>으로 바꾸는 현명한 전략입니다.</li>
                    <li><strong>적법성 확보:</strong> <strong>증여신고, 세금 납부, 자금이체 증빙</strong>을 통해 자녀의 실질적 납입능력을 명확히 입증함으로써, 향후 과세당국의 문제 제기 가능성을 <span class="highlight-pink">원천 차단</span>합니다.</li>
                </ul>
            </div>
            <h3>5. 증여세 계산 상세</h3>
            <h4>[연간 증여세 산출 근거]</h4>
            <div class="table-wrapper">
                <table style="min-width: 0;">
                    <thead>
                        <tr>
                            <th style="width: 40%;">항목</th>
                            <th>금액</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>연간 증여금액</strong></td>
                            <td>168,000,000원</td>
                        </tr>
                        <tr>
                            <td><strong>성인 자녀 증여공제 (10년간)</strong></td>
                            <td>(50,000,000원)</td>
                        </tr>
                        <tr style="background:var(--color-light-gray);">
                            <td><strong>증여세 과세표준</strong></td>
                            <td>118,000,000원</td>
                        </tr>
                        <tr>
                            <td><strong>세율 구간</strong></td>
                            <td>1억 초과 5억 이하: 20%</td>
                        </tr>
                        <tr>
                            <td><strong>산출세액</strong></td>
                            <td>23,600,000원 (1.18억 × 20%)</td>
                        </tr>
                        <tr>
                            <td><strong>누진공제</strong></td>
                            <td>(10,000,000원)</td>
                        </tr>
                        <tr style="background:var(--color-light-gray); font-weight:bold;">
                            <td style="color:var(--color-primary-dark)"><strong>납부할 증여세</strong></td>
                            <td style="color:var(--color-primary-dark)">13,600,000원</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p class="table-caption">※ 실제 약 1,360만~1,460만 원 수준 (과세표준 및 공제 적용 방식에 따라 변동)</p>
        </section>

        <section class="section">
            <h2>V. 기대효과 및 종합 제언</h2>
            <h3>1. Before & After 시뮬레이션: 원장님 사후 상속 개시 상황</h3>
            <div class="comparison-table">
                <div class="comparison-card before">
                    <h4>Before (실행 전)</h4>
                    <ul>
                        <li><strong>발생 상속세:</strong> 약 39.2억 원</li>
                        <li><strong>납부 재원:</strong> 보유 금융자산 20억 (부족액 <span class="highlight-pink">약 19.2억</span>)</li>
                        <li><strong>납부 결과:</strong> 금융자산 전액 소진, <strong>병원 건물 강제 매각</strong> (시세 이하)</li>
                        <li><strong>상속 후 자산:</strong> 핵심 자산 상실 (병원 건물 매각)</li>
                        <li style="font-weight:700; font-size:1.2em; margin-top:1rem; border-top:1px solid rgba(255,255,255,0.3); padding-top:1rem;">결론: <span class="highlight-pink">자산 손실 및 가족 분쟁 우려</span></li>
                    </ul>
                </div>
                <div class="comparison-card after">
                    <h4>After (실행 후)</h4>
                    <ul>
                        <li><strong>발생 상속세:</strong> 약 39.2억 원 (상속재산 동일)</li>
                        <li><strong>납부 재원:</strong> 금융자산 20억 + <span class="highlight-yellow">과세제외 사망보험금 25억</span></li>
                        <li><strong>납부 결과:</strong> 사망보험금으로 상속세 완납, 금융자산 일부 보존, <strong>병원 건물 온전히 보존</strong></li>
                        <li><strong>상속 후 자산:</strong> 병원 건물 포함 <strong>모든 자산 온전히 승계</strong></li>
                        <li style="font-weight:700; font-size:1.2em; margin-top:1rem; border-top:1px solid rgba(255,255,255,0.3); padding-top:1rem;">결론: <span class="highlight-yellow">성공적인 부의 이전</span></li>
                    </ul>
                </div>
            </div>

            <h3>2. 가족·심리적 변화</h3>
            <div class="info-card">
                <ul>
                    <li><strong>자산가의 품격:</strong> 복잡하고 민감한 상속 문제를 미리 정리함으로써, 자녀들에게 재산뿐만 아니라 <strong>'지혜'와 '가족에 대한 사랑'</strong>까지 물려주는 현명한 자산가로서의 만족감과 자부심을 느끼게 됩니다.</li>
                    <li><strong>가족의 평화:</strong> 상속재산 분할과 세금 문제로 인한 자녀들 간의 잠재적 갈등 요소를 원천적으로 차단하여, <span class="highlight-yellow">가족의 화목을 지키는 가장 확실한 장치</span>가 됩니다.</li>
                    <li><strong>완벽한 은퇴 준비:</strong> <strong>노후와 상속이라는 인생의 가장 큰 숙제를 해결</strong>했다는 안도감 속에서, 남은 인생을 경제적, 심리적 불안 없이 온전히 즐기고 누릴 수 있습니다.</li>
                </ul>
            </div>

<h3>3. 전문가 최종 의견</h3>
<div class="expert-opinion-box">
    <span class="opinion-icon">💬</span>
    <p>"원장님, 지난 30년간 원장님의 손을 거쳐 수많은 분들이 아름다움과 자신감을 되찾았습니다. 이제는 원장님께서 평생 쌓아 올리신 <strong>'자산의 아름다움'</strong>을 지켜낼 차례입니다.</p>
    <p>원장님의 자산은 단순한 돈의 액수가 아니라, 원장님의 인생과 땀, 그리고 철학이 담긴 결정체입니다. 그것이 상속세라는 단 하나의 문제 때문에 허무하게 흩어지게 둘 수는 없습니다.</p>
    <p>오늘 제안 드린 플랜은 단순히 보험 상품 하나를 가입하는 것이 아닙니다. 이것은 원장님의 인생과 유산을 다음 세대로 온전히 이어주는 <strong>'다리'를 놓는 위대한 건축 작업</strong>입니다.</p>
    <p class="opinion-highlight">살아계실 때는 든든한 연금 재원이 되고, 떠나실 때는 자녀들의 눈물을 닦아줄 가장 현실적인 힘이 될 것입니다. 지금의 작은 결단이 10년, 20년 후 원장님 가문의 역사를 바꿀 것이라 확신합니다."</p>
</div>

            <h3>4. 실행 플랜 (적법성 확보를 위한 단계별 가이드)</h3>
            <div class="timeline-container">
                 <div class="timeline-stepper">
                    <div class="step active">
                        <div class="step-circle">1</div>
                        <p class="step-title">가족 합의</p>
                    </div>
                    <div class="step">
                        <div class="step-circle">2</div>
                        <p class="step-title">상품 설계</p>
                    </div>
                    <div class="step">
                        <div class="step-circle">3</div>
                        <p class="step-title">증여 및 신고</p>
                    </div>
                    <div class="step">
                        <div class="step-circle">4</div>
                        <p class="step-title">계약 및 관리</p>
                    </div>
                 </div>
                 <div class="timeline-content">
                    <div class="content-item">
                        <strong>Phase 1: 가족 합의</strong>
                        <ol>
                            <li>본 플랜의 취지와 내용을 자녀들에게 설명하고, 계약 주체가 될 장남의 동의를 구합니다.</li>
                            <li>장남에게 증여 및 보험료 납입 책임에 대해 충분히 설명합니다.</li>
                        </ol>
                    </div>
                    <div class="content-item">
                        <strong>Phase 2: 상품 설계 및 확정</strong>
                        <ol>
                            <li>2~3개 주요 보험사의 상품을 비교하여 원장님께 가장 유리한 조건의 상품을 최종 선택합니다.</li>
                            <li>보험료, 보험금, 환급률 등 구체적 수치를 확인합니다.</li>
                        </ol>
                    </div>
                    <div class="content-item">
                        <strong class="key-point">Phase 3: 증여 계약 체결 및 적법한 증여 절차 이행 (⭐ 가장 중요)</strong>
                        <ol>
                            <li><strong>증여계약서 작성:</strong> 원장님(증여자)과 장남(수증자) 간 증여계약서를 작성합니다.</li>
                            <li><strong>자금 이체:</strong> 원장님 계좌 → 장남 계좌로 <span class="highlight-pink">반드시 은행 이체</span>로 증여금을 송금합니다 (현금 수수 절대 금지).</li>
                            <li><strong>증여세 신고 및 납부:</strong> 증여일로부터 3개월 이내에 세무서에 증여세를 신고하고 납부합니다.</li>
                            <li><strong>증빙 서류 보관:</strong> 증여계약서, 이체 확인증, 증여세 신고서, 납부영수증 등을 철저히 보관합니다.</li>
                            <li><strong>매년 반복:</strong> 이 절차를 10년간 매년 반복하여 적법성을 확보합니다.</li>
                        </ol>
                    </div>
                    <div class="content-item" style="border-bottom: none; margin-bottom: 0; padding-bottom: 0;">
                        <strong>Phase 4: 보험 계약 체결 및 지속적 관리</strong>
                        <ol>
                            <li>모든 서류 준비 후, 자녀(계약자)가 보험료를 <span class="highlight-pink">자신의 계좌에서 납부</span>하는 구조로 청약 절차를 진행합니다.</li>
                            <li>매년 증여 및 납입 절차를 정확히 이행합니다.</li>
                            <li>세법 변동 사항을 모니터링하고 필요시 플랜을 조정합니다.</li>
                        </ol>
                    </div>
                 </div>
            </div>

            <h4 style="margin-top: var(--spacing-2xl);">📄 적법성 확보를 위한 4대 증빙 절차</h4>
            <div class="step-card-grid">
                <article class="step-card">
                    <header class="step-card-header">1) 증여계약서</header>
                    <ul class="step-card-ul">
                        <li><label><input type="checkbox"> 증여계약서 작성(부↔자)</label></li>
                        <li><label><input type="checkbox"> 금액·일자·목적 명시</label></li>
                        <li><label><input type="checkbox"> 서명·날인·보관</label></li>
                    </ul>
                    <footer class="step-card-footer">TIP: 표준 양식 사용, 스캔본 클라우드 백업</footer>
                </article>
                <article class="step-card">
                    <header class="step-card-header">2) 은행이체</header>
                    <ul class="step-card-ul">
                        <li><label><input type="checkbox"> 부→자 계좌 이체(현금 수수 금지)</label></li>
                        <li><label><input type="checkbox"> 이체확인증 발급/보관</label></li>
                        <li><label><input type="checkbox"> 메모: “보험료 증여”</label></li>
                    </ul>
                    <footer class="step-card-footer">TIP: 매년 동일 패턴 유지(일자·금액)</footer>
                </article>
                <article class="step-card">
                    <header class="step-card-header">3) 증여세 신고/납부</header>
                    <ul class="step-card-ul">
                        <li><label><input type="checkbox"> 증여일로부터 3개월 내 신고</label></li>
                        <li><label><input type="checkbox"> 공제·누진공제 확인</label></li>
                        <li><label><input type="checkbox"> 납부 영수증 확보</label></li>
                    </ul>
                    <footer class="step-card-footer">TIP: 홈택스 전자신고 저장</footer>
                </article>
                <article class="step-card">
                    <header class="step-card-header">4) 영수증·증빙 보관</header>
                    <ul class="step-card-ul">
                        <li><label><input type="checkbox"> 계약서/이체증/신고서/영수증</label></li>
                        <li><label><input type="checkbox"> 보험 납입내역(자 계좌)</label></li>
                        <li><label><input type="checkbox"> 연도별 폴더 정리</label></li>
                    </ul>
                    <footer class="step-card-footer">TIP: 세무조사 대비, 10년 체계 보관</footer>
                </article>
            </div>

            <div class="info-card info-card--success" style="margin-top: var(--spacing-2xl);">
                <h4>평생 파트너 약속</h4>
                <p style="margin:0;">계약이 체결되면, 매년 증여세 신고부터 향후 연금 전환, 최종적으로 상속세 신고 및 보험금 청구까지 모든 과정을 제가 책임지고 관리해 드리는 평생의 금융 파트너가 되어 드릴 것을 약속합니다.</p>
            </div>

            <h2>VI. 핵심 요약 (One-Page Summary)</h2>
<div class="info-card one-pager-card" style="margin-top: var(--spacing-lg);">
    <ul class="summary-list">
        <li><b>핵심 과제:</b> <span class="highlight-pink">약 19.2억 원의 상속세 현금 재원 부족</span> 및 은퇴 후 현금흐름(연금) 부재</li>
        <li><b>해결 구조:</b> 자녀 명의 종신보험(<b>사망보험금 25억</b>) + 적법한 사전 증여(<b>연 1.68억</b>) → <span class="highlight-yellow">'과세제외 현금'과 '평생 연금 재원' 동시 확보</span></li>
        <li><b>주요 효과 (상속):</b> <span class="highlight-pink">약 39.2억의 상속세</span>를 자녀 고유 재산(25억)으로 완납. <b>병원 건물 등 핵심 자산 100% 보존.</b></li>
        <li><b>주요 효과 (은퇴):</b> 68세 은퇴 시, 누적 적립금(약 18억)을 연금으로 전환하여 <b>월 500~650만원</b>의 안정적 노후 소득 창출.</li>
        <li><b>핵심 절차:</b> <b>'증여계약서 → 은행이체 → 증여세 신고/납부 → 증빙보관'</b>의 4단계 적법성 확보가 플랜 성공의 관건.</li>
    </ul>
</div>

        </section>

        <section class="section">
            <h2>VII. 컨설팅 시나리오 (Consulting Scenarios)</h2>
            <div class="scenario-header">
                <p>
                    <span class="badge topic-badge">상담주제</span>
                    <span class="topic-text">"원장님의 '자산 가문', 세금으로부터 지켜낼 현실적 방패와 평생 연금 동시 설계"</span>
                </p>
            </div>
            <div>
                <div class="scenario-step">1단계: 상담 시작 - 존경과 질문</div>
                <div class="dialogue-item dialogue-consultant"><div class="dialogue-label">컨설턴트</div>"원장님, 이 병원 건물을 보고 있으면 원장님께서 평생 얼마나 치열하게 살아오셨을지 느껴져서 늘 존경스러운 마음이 듭니다. 혹시 이 멋진 자산을 다음 세대에게 어떻게 물려주실지 구체적으로 계획해 보신 적이 있으신지요?"</div>
                <div class="dialogue-item dialogue-client"><div class="dialogue-label">고객</div>"생각은 많죠. 그런데 상속세가 무섭다는 얘기만 들었지, 막상 뭘 어떻게 해야 할지는 막막하기만 합니다."</div>
                
                <div class="scenario-step">2단계: 문제 인식 - 충격적인 숫자의 제시</div>
                <div class="dialogue-item dialogue-consultant"><div class="dialogue-label">컨설턴트</div>"제가 원장님의 자산을 바탕으로 예상 상속세를 계산해 봤습니다. 놀라지 마십시오. <strong>약 39.2억 원</strong>입니다. 더 큰 문제는,자녀분들이 이 세금을 6개월 안에 '현금'으로 내야 한다는 사실입니다. 현재 금융자산 20억을 다 써도 <span class="highlight-pink">약 19억이 부족</span>합니다. 원장님, 만약 이 상황이 닥치면 자녀분들은 어떤 선택을 하게 될까요?"</div>
                <div class="dialogue-item dialogue-client"><div class="dialogue-label">고객</div>"...<span class="highlight-pink">이 병원 건물을 팔아야겠지요.</span> 상상도 하기 싫은 일입니다."</div>
                <div class="dialogue-item dialogue-consultant"><div class="dialogue-label">컨설턴트</div>"맞습니다. 평생의 역사가 담긴 건물이 세금 때문에 헐값에 팔려나가는 것, 그것이 바로 원장님께서 지금 대비하지 않으시면 마주하게 될 현실입니다."</div>

                <div class="scenario-step">3단계: 솔루션 제안 - 명쾌한 해법과 비유</div>
                <div class="dialogue-item dialogue-consultant"><div class="dialogue-label">컨설턴트</div>"이 비극을 막을 수 있는 가장 현실적인 방법이 있습니다. 아드님 명의로 <span class="highlight-yellow"><strong>'25억 원짜리 상속재산 과세제외 구조의 현금 확보 장치'</strong></span>를 미리 만들어두는 겁니다. 원장님께서 돌아가시는 순간, 이 보험금이 지급되면서 상속세와는 전혀 무관한 현금 25억이 나와 상속세를 완납하고도 남게 됩니다."</div>
                <div class="dialogue-item dialogue-client"><div class="dialogue-label">고객</div>"그게 바로 종신보험이라는 거군요. 그런데 보험료가 만만치 않을 텐데요."</div>
                <div class="dialogue-item dialogue-consultant"><div class="dialogue-label">컨설턴트</div>"정확합니다. 현실적으로 58세 기준으로 25억 원을 확보하려면 월 1,400만 원 정도가 필요합니다. 물론 적지 않은 금액이지만, 원장님의 현재 현금흐름을 고려하면 충분히 가능한 범위입니다. 그리고 이 플랜의 진짜 가치는 이것입니다. 떠나실 때는 '상속세 방패'가 되지만, 살아계실 때는 그 자체가 원장님의 <span class="highlight-yellow"><strong>'든든한 연금 재원'</strong></span>이 됩니다. 은퇴하시는 68세 시점에 쌓인 약 18억 원을 연금으로 전환하면, <strong>매달 600만 원 수준의 평생 연금</strong>을 받으실 수 있습니다. 상속과 은퇴, 두 가지를 동시에 해결하는 셈이죠."</div>

                <div class="scenario-step">4단계: 적법성 강조</div>
                <div class="dialogue-item dialogue-consultant"><div class="dialogue-label">컨설턴트</div>"여기서 가장 중요한 포인트가 있습니다. 이 보험금이 상속재산에 포함되지 않으려면, 아드님이 <strong>'실질적으로'</strong> 보험료를 낸 것이 명확해야 합니다. 따라서 원장님께서 매년 아드님에게 보험료를 증여하시되, <strong>반드시 증여신고를 하고 세금을 내셔야 합니다.</strong> 매년 약 1,400만 원 정도의 증여세가 발생하지만, 이것이 바로 향후 과세당국의 문제 제기를 막는 <span class="highlight-yellow">가장 확실한 방어막</span>입니다. 은행 이체 기록, 증여세 신고서, 납부 영수증 등 모든 증빙을 철저히 남기는 것, 이것이 이 플랜의 핵심입니다."</div>

                <div class="scenario-step">5단계: 동의 유도 - 결단과 가치</div>
                <div class="dialogue-item dialogue-consultant"><div class="dialogue-label">컨설턴트</div>"원장님, 이 플랜은 단순히 돈을 아끼는 절세 상품이 아닙니다. 이것은 원장님의 <strong>'자부심'과 '가족의 평화'</strong>를 지키는 가장 확실한 약속입니다. 지금 10년간 약 16억 8천만 원의 보험료와 1억 4천만 원의 증여세를 투자해서 미래의 수십억 원짜리 비극을 막으시겠습니까? 아니면 그저 막연한 불안감을 안고 하루하루를 보내시겠습니까? 원장님의 현명한 결정을 돕기 위해 제가 여기 있습니다."</div>
                
                <hr style="margin: var(--spacing-2xl) 0; border: 0; border-top: 1px solid var(--color-border);">
                <h3 style="margin-top:0;">심화 응대 기법: 고객 반론 대응</h3>

                <div class="info-card" style="margin-top: var(--spacing-lg);">
                    <h4>💰 비용 반론: "월 1,400만 원은 너무 부담됩니다."</h4>
                    <p style="border-top: 1px solid var(--color-border); padding-top: var(--spacing-md); margin-top:var(--spacing-md);">
                        <strong>응대법:</strong> "충분히 이해합니다, 원장님. 가장 중요한 것은 10년간 플랜을 '완주'하는 것입니다. 그렇다면 목표 보험금을 25억이 아닌 15억으로 낮추어 월 납입액을 800만 원 수준으로 줄이는 대안을 즉시 설계해 드릴 수 있습니다. <span class="highlight-yellow">완벽한 25억 방패가 아니더라도, 15억의 방패라도 미리 만드는 것이 '0원'인 상태로 상속을 맞는 것보다 수백 배 현명한 선택</span>입니다. 원장님의 현금흐름에 가장 적합한 최적의 규모를 함께 찾아보겠습니다."
                    </p>
                </div>

                <div class="info-card" style="margin-top: var(--spacing-lg);">
                    <h4>🤔 대안 반론: "그냥 아들 통장에 돈을 주고, 아들이 직접 주식이나 펀드에 투자하는 게 낫지 않나요?"</h4>
                    <p style="border-top: 1px solid var(--color-border); padding-top: var(--spacing-md); margin-top:var(--spacing-md);">
                        <strong>응대법:</strong> "매우 합리적인 질문입니다. 하지만 두 가지 결정적인 차이가 있습니다. 첫째는 <strong>'투자 리스크'</strong>입니다. 10년, 20년 뒤 상속이 발생하는 '그 시점'에 아드님의 투자 자산이 반드시 수익을 내고 현금화될 수 있다는 보장이 없습니다. <span class="highlight-pink">최악의 경우 손실이 날 수도 있습니다.</span> 둘째는 <strong>'확실성'</strong>입니다. 이 플랜은 원장님의 사망이라는 '약속된 시점'에, '약속된 금액(25억)'이, '세금 문제 없이' 현금으로 나오는 유일한 금융상품입니다. 상속세처럼 치명적인 리스크는 예측 불가능한 투자수익이 아닌, <strong>보장된 현금</strong>으로 막아야 합니다."
                    </p>
                </div>
                
                <div class="info-card" style="margin-top: var(--spacing-lg);">
                    <h4>💸 세금 반론: "매년 내는 증여세 1,460만 원이 너무 아깝습니다."</h4>
                    <p style="border-top: 1px solid var(--color-border); padding-top: var(--spacing-md); margin-top:var(--spacing-md);">
                        <strong>응대법:</strong> "그렇게 느끼실 수 있습니다. 하지만 이 증여세는 '비용'이 아니라 <strong>'투자'</strong>입니다. 10년간 총 1억 4,600만 원의 세금은, 미래에 <strong>25억 원이라는 거대한 자산을 '상속세 테이블'에서 완전히 제외시키기 위한 '입장권'</strong>이자 '가장 확실한 법적 증빙'입니다. 만약 이 증빙이 없어서 25억 전액이 상속재산으로 합산된다면, 원장님 가정은 약 12.5억 원(50% 세율 가정)의 세금을 추가로 내야 합니다. <span class="highlight-yellow">1.46억을 투자해서 12.5억의 세금을 막는, 가장 확실한 절세 전략입니다.</span>"
                    </p>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>VIII. 부록 (Appendix)</h2>
            <h3>1. 전문용어 설명</h3>
            <div class="accordion">
                <div class="accordion-item"><button class="accordion-header" aria-expanded="false"><span><strong>종신보험</strong></span><span class="accordion-icon">▼</span></button><div class="accordion-content"><div class="accordion-body">피보험자가 사망할 때까지를 보험기간으로 하여, 기간과 관계없이 사망 시 약정한 보험금을 지급하는 상품. 적립금이 쌓이는 구조로, 중도 해지 시 환급금이 발생하며 이를 연금으로 전환할 수 있는 기능이 있습니다.</div></div></div>
                <div class="accordion-item"><button class="accordion-header" aria-expanded="false"><span><strong>상속세</strong></span><span class="accordion-icon">▼</span></button><div class="accordion-content"><div class="accordion-body">사망으로 인해 재산이 무상 이전될 때, 그 재산을 물려받는 상속인에게 과세되는 세금. 상속 개시일(사망일)로부터 6개월 이내에 신고 및 납부해야 합니다.</div></div></div>
                <div class="accordion-item"><button class="accordion-header" aria-expanded="false"><span><strong>증여세</strong></span><span class="accordion-icon">▼</span></button><div class="accordion-content"><div class="accordion-body">타인으로부터 재산을 무상으로 이전받을 때, 그 재산을 받은 수증자에게 과세되는 세금. 성인 자녀의 경우 10년간 5,000만 원까지 공제됩니다.</div></div></div>
                <div class="accordion-item"><button class="accordion-header" aria-expanded="false"><span><strong>연금 전환</strong></span><span class="accordion-icon">▼</span></button><div class="accordion-content"><div class="accordion-body">보험 계약의 해지환급금을 일시에 받지 않고, 이를 재원으로 하여 종신 또는 일정 기간 동안 연금 형태로 나누어 받는 기능.</div></div></div>
                <div class="accordion-item"><button class="accordion-header" aria-expanded="false"><span><strong>상속재산 과세제외 구조</strong></span><span class="accordion-icon">▼</span></button><div class="accordion-content"><div class="accordion-body">법률상 상속재산으로 간주되지 않아 상속세 과세 대상에서 제외되는 구조. 종신보험의 경우 <strong>(계약자 = 수익자 = 상속인)</strong> 구조에서 가능.</div></div></div>
            </div>
            <h3>2. FAQ</h3>
            <div class="accordion">
                <div class="accordion-item"><button class="accordion-header" aria-expanded="false"><span><strong>Q1. 중간에 아들이 보험료를 못 낼 상황이 되면 어떻게 하나요?</strong></span><span class="accordion-icon">▼</span></button><div class="accordion-content"><div class="accordion-body">A1. 그런 상황을 대비해 다양한 기능이 있습니다. 적립금 내에서 보험료를 자동으로 대체 납부하는 '자동대출납입' 기능을 활용하거나, 일시적으로 납입을 중지하는 '납입중지' 기능을 활용하여 계약을 유지할 수 있습니다. 다만, 가능한 한 정상적으로 납입하는 것이 적립금 증가 측면에서 유리합니다.</div></div></div>
                <div class="accordion-item"><button class="accordion-header" aria-expanded="false"><span><strong>Q2. 나중에 상속세법이 바뀌어서 이 방법이 소용없어지면 어떡하나요?</strong></span><span class="accordion-icon">▼</span></button><div class="accordion-content"><div class="accordion-body">A2. 훌륭한 질문입니다. 세법은 변할 수 있지만, <strong>'실질과세의 원칙'</strong>과 '계약자=수익자' 구조의 법리는 쉽게 변하지 않습니다. 자녀가 본인의 재원(증여받아 세금까지 낸 돈)으로 보험료를 납입했다는 사실이 명확하다면, 향후 세법이 변하더라도 이 보험금이 상속인의 고유재산이라는 본질은 인정받을 가능성이 매우 높습니다. 바로 이 때문에 <span class="highlight-pink"><strong>증여신고와 자금이체 증빙</strong>이 그토록 중요한 것</span>입니다. 그럼에도 불구하고, 저희는 매년 세법 개정안을 모니터링하며 플랜에 변화가 필요할 시 즉각적으로 알려드릴 것입니다.</div></div></div>
                <div class="accordion-item"><button class="accordion-header" aria-expanded="false"><span><strong>Q3. 25억이라는 큰 돈을 아들이 잘 관리할 수 있을까요?</strong></span><span class="accordion-icon">▼</span></button><div class="accordion-content"><div class="accordion-body">A3. 그 부분까지 고려할 수 있습니다. 보험금 지급 방식을 '일시금'이 아닌, <strong>'분할지급'</strong> 또는 <strong>'연금형'</strong>으로 설정하여 아드님이 안정적으로 자금을 활용하도록 설계할 수도 있습니다. 이 부분은 계약 시점에 함께 상의하여 최적의 방안을 찾겠습니다.</div></div></div>
                <div class="accordion-item"><button class="accordion-header" aria-expanded="false"><span><strong>Q4. 연금전환 시 실제로 받을 수 있는 금액은 어떻게 되나요?</strong></span><span class="accordion-icon">▼</span></button><div class="accordion-content"><div class="accordion-body">A4. 68세 시점 해지환급금 약 18억 원을 기준으로 시뮬레이션하면 다음과 같습니다:
                <br><br><strong>[연금 전환 옵션별 예상 금액]</strong>
                <ul style="padding-left: var(--spacing-md); margin-top: var(--spacing-sm);">
                    <li><strong>종신연금 (일반형):</strong> 월 약 600~650만원<br><small>평생 지급, 조기 사망 시 잔액 없음</small></li>
                    <li><strong>종신연금 (10년 보증형):</strong> 월 약 550~600만원<br><small>10년 이내 사망 시 남은 기간 유족 지급</small></li>
                    <li><strong>종신연금 (20년 보증형):</strong> 월 약 500~550만원<br><small>20년 이내 사망 시 남은 기간 유족 지급</small></li>
                    <li><strong>확정연금 (20년형):</strong> 월 약 700~800만원<br><small>20년 고정 지급, 이후 종료</small></li>
                </ul>
                <small>※ 전환율 및 금리 수준에 따라 변동. 실제 전환액은 전환 시점의 공시이율, 선택하신 옵션(보증기간), 보험사별 연금전환율에 따라 ±20% 변동될 수 있습니다. 계약 시점과 전환 시점에 정확한 시뮬레이션을 다시 진행할 것을 권장합니다.</small>
                </div></div></div>
            </div>
            <h3>3. 관련 법규·출처</h3>
            <div class="accordion">
<div class="accordion-item">
  <button class="accordion-header" aria-expanded="false">
    <span><strong>생명보험의 법적 정의</strong></span>
    <span class="accordion-icon">▼</span>
  </button>
  <div class="accordion-content">
    <div class="accordion-body">
      <strong>근거:</strong> 보험업법 제2조 제1항 제4호 (생명보험의 정의)<br>
      <strong>내용:</strong> 생명보험이란 사람의 생명 또는 장수를 보험사고로 하는 계약을 말하며, 
      종신보험·정기보험·연금보험 등이 이에 해당합니다. 이는 단순한 금융투자상품이 아닌 
      ‘인적 사고’를 전제로 한 보장계약으로, 사망보험금은 상속세법상 보험금으로 분류됩니다.<br>
      <strong>반대해석:</strong> 본 조항은 보험계약의 성격을 규정할 뿐, 과세 여부를 직접 결정하지는 않으므로 
      비과세·과세 판정은 상속세 및 증여세법의 규정(제8조, 제53조 등)에 따라 판단해야 합니다.
    </div>
  </div>
</div>
                <div class="accordion-item"><button class="accordion-header" aria-expanded="false"><span><strong>상속재산으로 보는 보험금</strong></span><span class="accordion-icon">▼</span></button><div class="accordion-content"><div class="accordion-body"><strong>근거:</strong> 상속세 및 증여세법 제8조 (상속재산으로 보는 보험금)<br><strong>내용:</strong> 피상속인의 사망으로 인하여 받는 생명보험 또는 손해보험의 보험금으로서 피상속인이 보험계약자인 보험계약에 의하여 받는 것은 상속재산으로 본다.<br><strong>반대해석:</strong> 피상속인이 아닌 <strong>상속인이 보험계약자</strong>로서 보험료를 납부한 경우, 해당 보험금은 상속재산에 포함되지 않음. 단, <strong>실질적 납입능력 입증 필수.</strong></div></div></div>
                <div class="accordion-item"><button class="accordion-header" aria-expanded="false"><span><strong>증여재산 공제</strong></span><span class="accordion-icon">▼</span></button><div class="accordion-content"><div class="accordion-body"><strong>근거:</strong> 상속세 및 증여세법 제53조 (증여재산 공제)<br><strong>내용:</strong> 거주자가 직계비속(성인 자녀)에게 증여하는 경우, <strong>10년간 합산하여 5,000만 원</strong>까지 증여세 과세가액에서 공제한다. 이 한도를 초과하는 금액에 대해서는 증여세를 납부해야 하며, 본 플랜은 이 규정에 따라 정확히 세금을 납부하여 자금 출처를 명확히 하는 것을 전제로 합니다.</div></div></div>
            </div>


<div class="waterfall-scroll-wrapper">
<h3 style="margin-top: var(--spacing-2xl);">7. 상속세 GAP 워터폴 시뮬레이터</h3>
<div class="simulation-card wf-simulator-container"> <h4>입력값 설정 (단위: 억원)</h4>
    <div class="wf-input-grid">
        <div class="wf-field">
            <label for="wf-sim-total">① 총 상속재산</label>
            <input id="wf-sim-total" type="number" step="0.001" value="100.000">
        </div>
        <div class="wf-field">
            <label for="wf-sim-deduct">② 공제 합계 <small>(배우자·일괄·기타)</small></label>
            <input id="wf-sim-deduct" type="number" step="0.001" value="10.000">
        </div>
        <div class="wf-field">
             <label for="wf-sim-grosstax">③ 산출세액</label>
             <input id="wf-sim-grosstax" type="number" step="0.001" value="40.400">
        </div>
        <div class="wf-field">
             <label for="wf-sim-taxcr">④ 신고세액공제</label>
             <input id="wf-sim-taxcr" type="number" step="0.001" value="1.212">
        </div>
         <div class="wf-field">
             <label for="wf-sim-cash">⑤ 보유 현금</label>
             <input id="wf-sim-cash" type="number" step="0.001" value="20.000">
         </div>
    </div>

    <h4>자동 계산 결과 (단위: 억원)</h4>
     <div class="wf-result-grid">
         <div class="wf-field">
             <label for="wf-sim-base">⑥ 과세표준</label>
             <input id="wf-sim-base" type="text" readonly class="result-display"> </div>
         <div class="wf-field">
             <label for="wf-sim-nettax">⑦ 최종세액</label>
             <input id="wf-sim-nettax" type="text" readonly class="result-display">
         </div>
         <div class="wf-field">
             <label for="wf-sim-gap">⑧ 부족액</label>
             <input id="wf-sim-gap" type="text" readonly class="result-display result-gap">
         </div>
    </div>

    <div class="wf-controls no-print">
        <button id="wf-sim-draw-button">📊 그래프 새로고침</button> <button id="wf-sim-preset">📄 사례값 불러오기</button>
        <button id="wf-sim-dl">💾 PNG 저장</button>
    </div>

    <div class="wf-simulator-legend"> <span class="legend-item base"><span class="legend-dot"></span>기준(총계)</span>
        <span class="legend-item delta neg"><span class="legend-dot"></span>차감(음수 Delta)</span>
        <span class="legend-item delta pos"><span class="legend-dot"></span>증가(양수 Delta)</span>
    </div>

     <div class="wf-simulator-svg-container"> <svg id="wf-simulator-svg"
                 viewBox="0 0 960 360"
                 preserveAspectRatio="xMidYMid meet"
                 xmlns="http://www.w3.org/2000/svg" role="img" aria-label="GAP 워터폴 차트 시뮬레이터"
                 style="min-width: 700px;" ></svg></svg>
     </div>
     <p id="wf-sim-summary" class="wf-summary-text"></p>
</div>
</div>
        </section>
    </main>

<footer class="footer">
    <div class="footer-notice">
        <div class="notice-title">⚠️ 중요 고지사항</div>
        <p><small>본 보고서는 '이너서클 멤버십'과 '컨설턴트 홈페이지' 이용회원의 원활한 영업활동을 돕기 위해서 가상의 사례(회사, 개인 등의 정보 등...)를 설정하여 '인공지능'을 통해 제작되었습니다. AI는 언제든지 오류가 있을 수 있으므로 참고용으로 사용하여 주시고, 실무 사용시 세법을 포함한 모든 규정, 제도들은 반드시 분야별 전문가와 충분히 상담을 하신 후 진행하시기 바랍니다. 사용에 따라 발생되는 문제에 대하여 제작처는 책임이 없음을 알려드립니다.</small></p>
    </div>
    <div class="footer-meta">
        <div class="footer-info">
            <p class="contact"><strong>이용문의:</strong> <a href="tel:010-5244-1467" class="phone-link">박신제 본부장 010-5244-1467</a></p>
        </div>
        <div class="footer-copyright">
            <p>제작: (주)한국FP센터 All Rights Reserved</p>
        </div>
    </div>
</footer>

</div>

<script>
// --- 1. 탭 및 아코디언 기본 기능 ---
function showSection(index) {
  const sections = document.querySelectorAll('.section');
  const buttons  = document.querySelectorAll('.nav-tabs button');
  sections.forEach(s => s.classList.remove('active'));
  buttons.forEach(b => b.classList.remove('active'));
  if (sections[index]) sections[index].classList.add('active');
  if (buttons[index]) buttons[index].classList.add('active');
  localStorage.setItem('activeTab', String(index));
  const container = document.querySelector('.container');
  if (container) {
      // 모바일 환경 등에서 container가 없을 경우 에러 방지
      const containerTop = container.offsetTop || 0;
      window.scrollTo({ top: containerTop, behavior: 'smooth' });
  }
}
document.querySelectorAll('.accordion-header').forEach(header => {
    header.addEventListener('click', () => {
        const content = header.nextElementSibling;
        const item = header.closest('.accordion-item'); // 부모 item 찾기
        header.classList.toggle('active');
        item.classList.toggle('active'); // item에도 active 클래스 토글

        if (content.style.maxHeight) {
            content.style.maxHeight = null;
        } else {
            content.style.maxHeight = content.scrollHeight + "px";
        }

        // 다른 열려있는 아코디언 닫기 (선택사항)
        /*
        document.querySelectorAll('.accordion-item.active').forEach(openItem => {
            if (openItem !== item) {
                openItem.classList.remove('active');
                openItem.querySelector('.accordion-header').classList.remove('active');
                openItem.querySelector('.accordion-content').style.maxHeight = null;
            }
        });
        */
    });
});

// --- 2. 상속세 GAP 워터폴 차트 스크립트 ---
(function(){
  const svg = document.getElementById('wf-svg');
  if (!svg) return;

  let taxBase = 90.0, grossTax = 40.4, credit = 1.212, netTax = 39.188, cash = 20.0, gap = 19.188;

  function readConfig(){
    const configEl = document.getElementById('wf-config');
    if (!configEl) return;
    const pick = id => parseFloat(configEl.querySelector(`[data-id="${id}"]`)?.textContent.replace(/[^0-9.\-]/g,'')) || 0;
    taxBase = pick('taxBase'); grossTax = pick('grossTax'); credit = pick('credit');
    netTax = pick('netTax'); cash = pick('cash'); gap = pick('gap');
  }

  function formatWon(num){
    return (Math.round(num*1000)/1000).toLocaleString('ko-KR') + '억';
  }

  function render(){
    svg.innerHTML = '';
    const W = 800, H = 260, P = {l:70, r:20, t:20, b:40};
    const chartW = W - P.l - P.r; const chartH = H - P.t - P.b;
    const vals = [taxBase, grossTax, credit, netTax, cash, gap];
    const maxVal = Math.max(...vals) * 1.15;
    const y = v => P.t + chartH - (v / maxVal) * chartH;
    const xCenters = [70, 200, 315, 430, 575, 700]; const barW = 60;

    const guideY = y(netTax);
    const guide = document.createElementNS('http://www.w3.org/2000/svg','line');
    guide.setAttribute('x1', 10); guide.setAttribute('x2', W-P.r);
    guide.setAttribute('y1', guideY); guide.setAttribute('y2', guideY);
    guide.setAttribute('stroke','var(--color-primary)'); guide.setAttribute('stroke-dasharray','4 4');
    guide.setAttribute('opacity','0.7'); svg.appendChild(guide);

// 가이드 라인 라벨 (수정)
     const guideText = document.createElementNS('http://www.w3.org/2000/svg','text');
     guideText.setAttribute('x', W - P.r);      // ★ 수정: 오른쪽 끝으로
     guideText.setAttribute('y', guideY - 6);      // ★ 수정: 선 위로 (숫자 조정 가능)
     guideText.setAttribute('text-anchor','end');    // ★ 유지: 오른쪽 정렬
     guideText.setAttribute('font-size','11');
     guideText.setAttribute('font-weight','600');
     guideText.setAttribute('fill','var(--color-primary)');
     guideText.textContent = formatWon(netTax);
     svg.appendChild(guideText);

    const items = [
      {label:'과세표준', val: taxBase, color:'#7b8794'}, {label:'산출세액', val: grossTax, color:'#f59f00'},
      {label:'신고세액공제', val: credit, color:'#2fb344'}, {label:'최종세액', val: netTax, color:'#228be6'},
      {label:'보유현금', val: cash, color:'#15aabf'}, {label:'부족액', val: gap, color:'#fa5252'}
    ];

    items.forEach((it, i) => {
      const cx = xCenters[i]; const hTop = y(it.val);
      const rect = document.createElementNS('http://www.w3.org/2000/svg','rect');
      rect.setAttribute('x', cx - barW/2); rect.setAttribute('y', hTop);
      rect.setAttribute('width', barW); rect.setAttribute('height', Math.max(4, (it.val/maxVal)*chartH));
      rect.setAttribute('fill', it.color); rect.setAttribute('rx', 4); rect.setAttribute('opacity', 0.95);
      rect.appendChild(makeTitle(`${it.label}: ${formatWon(it.val)}`)); svg.appendChild(rect);

      const txt = document.createElementNS('http://www.w3.org/2000/svg','text');
      txt.setAttribute('x', cx); txt.setAttribute('y', hTop - 6); txt.setAttribute('text-anchor','middle');
      txt.setAttribute('font-size','12'); txt.setAttribute('font-weight','600'); txt.setAttribute('fill','var(--color-text-primary)');
      txt.textContent = formatWon(it.val); svg.appendChild(txt);

      const lbl = document.createElementNS('http://www.w3.org/2000/svg','text');
      lbl.setAttribute('x', cx); lbl.setAttribute('y', H - 12); lbl.setAttribute('text-anchor','middle');
      lbl.setAttribute('font-size','13'); lbl.setAttribute('font-weight','500'); lbl.setAttribute('fill','var(--color-text-secondary)');
      lbl.textContent = it.label; svg.appendChild(lbl);
    });

    const linkPairs = [ [1,2,'#adb5bd'], [2,3,'#adb5bd'], [3,4,'#adb5bd'], [4,5,'#adb5bd'] ];
     linkPairs.forEach(([a,b,st])=>{
       const x1 = xCenters[a] + barW/2 + 5; const x2 = xCenters[b] - barW/2 - 5;
       const y1 = y(items[a].val); const y2 = y(items[b].val);
       const line = document.createElementNS('http://www.w3.org/2000/svg','path');
       const d = `M ${x1-5} ${y1} C ${x1 + 20} ${y1}, ${x2 - 20} ${y2}, ${x2+5} ${y2}`;
       line.setAttribute('d', d); line.setAttribute('fill','none'); line.setAttribute('stroke', st);
       line.setAttribute('stroke-width','1.5'); line.setAttribute('opacity','0.6'); line.setAttribute('stroke-dasharray', '3 3');
       svg.insertBefore(line, svg.firstChild);
     });

// ===== [수정] 캡션(5초 요약) 위치 조정 =====
    const cap = document.createElementNS('http://www.w3.org/2000/svg','text');
    cap.setAttribute('x', W - P.r); // 우측 끝으로 변경 (Width - Right Padding)
    cap.setAttribute('y', P.t + 4); // 상단에서 약간 아래로 변경 (Top Padding + 4)
    cap.setAttribute('text-anchor', 'end'); // 우측 정렬 추가
    cap.setAttribute('font-size','12');
    cap.setAttribute('font-weight','600');
    cap.setAttribute('fill','var(--color-text-secondary)');
    cap.textContent = `[요약] 최종세액 ${formatWon(netTax)} - 보유현금 ${formatWon(cash)} = 부족액 ${formatWon(gap)}`;
    svg.appendChild(cap);
    // ===== 수정 끝 =====

    function makeTitle(text){ const t = document.createElementNS('http://www.w3.org/2000/svg','title'); t.textContent = text; return t; }
  }

  readConfig(); render();
})();

// --- 3. 페이지 로드 시 초기 실행 ---
document.addEventListener('DOMContentLoaded', () => {
  const savedTab = localStorage.getItem('activeTab');
  // localStorage 값이 null이거나 숫자가 아닐 경우 0으로 초기화
  const initialIndex = (savedTab !== null && !isNaN(parseInt(savedTab))) ? parseInt(savedTab) : 0;
  // 섹션 개수 범위 확인 (예: 8개 탭이면 0~7)
  const validIndex = Math.max(0, Math.min(initialIndex, document.querySelectorAll('.section').length - 1));
  showSection(validIndex);
});

(function(){
    // --- 요소 가져오기 (고유 ID 사용) ---
    const $ = id => document.getElementById(id);
    const svg = $('wf-simulator-svg'); // ★ ID 변경
    const summaryEl = $('wf-sim-summary'); // ★ ID 변경
    const drawButton = $('wf-sim-draw-button'); // ★ ID 변경
    const presetButton = $('wf-sim-preset'); // ★ ID 변경
    const downloadButton = $('wf-sim-dl'); // ★ ID 변경
    // 입력 필드 ID 변경
    const inputIds = {
        total: 'wf-sim-total', deduct: 'wf-sim-deduct', grosstax: 'wf-sim-grosstax',
        taxcr: 'wf-sim-taxcr', cash: 'wf-sim-cash'
    };
    // 결과 필드 ID 변경
    const resultIds = { base: 'wf-sim-base', nettax: 'wf-sim-nettax', gap: 'wf-sim-gap' };

    // --- 기본값 ---
    const defaultValues = {
        total: 100.000, deduct: 10.000, grosstax: 40.400, taxcr: 1.212, cash: 20.000
    };

    // --- 숫자 포맷 함수 ---
    const F = n => (Math.round(n*1000)/1000).toLocaleString('ko-KR');

    // --- 그래프 그리는 함수 ---
function draw(){
  console.log("draw() 함수 시작 v7-sim");
  if (!svg || !summaryEl) { console.error("SVG 또는 요약 요소를 찾을 수 없습니다."); return; }

  try {
    // 1) 입력값
    const T  = parseFloat($(inputIds.total).value)  || 0;   // 총 상속재산
    const D  = parseFloat($(inputIds.deduct).value) || 0;   // 공제 합계
    const GT = parseFloat($(inputIds.grosstax).value) || 0; // 산출세액
    const CR = parseFloat($(inputIds.taxcr).value)    || 0; // 신고세액공제
    const CH = parseFloat($(inputIds.cash).value)     || 0; // 보유현금

    // 2) 파생값
    const BASE = Math.max(T - D, 0);
    const NET  = Math.max(GT - CR, 0);
    const GAP  = Math.max(NET - CH, 0);

    // 3) 결과 표시
    $(resultIds.base).value   = F(BASE);
    $(resultIds.nettax).value = F(NET);
    $(resultIds.gap).value    = F(GAP);

    // 4) 단계 정의(누적 흐름)
    const steps = [
      {label:'총 상속재산',  type:'total', val:T,   color:'#94a3b8'},
      {label:'공제 합계',    type:'delta', val:-D,  color:'#ef4444'},
      {label:'과세표준',     type:'total', val:BASE,color:'#475569'},
      {label:'산출세액',     type:'delta', val:+GT, color:'#2563eb'},
      {label:'신고세액공제', type:'delta', val:-CR, color:'#ef4444'},
      {label:'최종세액',     type:'total', val:NET, color:'#475569'},
      {label:'보유현금',     type:'delta', val:-CH, color:'#ef4444'},
      {label:'부족액',       type:'total', val:GAP, color:'#dc2626'}
    ];

    // 5) 스케일
    let W = svg?.viewBox?.baseVal?.width  || svg.clientWidth  || 960;
    let H = svg?.viewBox?.baseVal?.height || svg.clientHeight || 360;
    if (!W || !H) { W = 960; H = 360; }

    const P = {left:80, right:30, top:40, bottom:70};
    const innerW = W - P.left - P.right;
    const innerH = H - P.top - P.bottom;

    // 누적 궤적(도메인 계산용)
    let run = 0;
    const track = [0];
    steps.forEach(s=>{
      if (s.type==='total'){ run = s.val; track.push(run); }
      else { track.push(run); run += s.val; track.push(run); }
    });
    const minV = Math.min(0, ...track);
    const maxV = Math.max(...track, 0.1);
    const y = v => P.top + innerH - ((v - minV) / (maxV - minV)) * innerH;

    // 6) 렌더
    svg.innerHTML = '';

    // 0축
    const axis = document.createElementNS('http://www.w3.org/2000/svg','line');
    axis.setAttribute('x1', P.left - 10);
    axis.setAttribute('x2', W - P.right);
    axis.setAttribute('y1', y(0));
    axis.setAttribute('y2', y(0));
    axis.setAttribute('stroke', '#e5e7eb');
    svg.appendChild(axis);

    const zero = document.createElementNS('http://www.w3.org/2000/svg','text');
    zero.setAttribute('x', P.left - 15);
    zero.setAttribute('y', y(0) + 4);
    zero.setAttribute('text-anchor','end');
    zero.setAttribute('font-size','10');
    zero.setAttribute('fill','#9ca3af');
    zero.textContent = '0억';
    svg.appendChild(zero);

    const n = steps.length;
    const gap = 28;
    const barW = (innerW - gap * (n - 1)) / n;

    run = 0;
    let prevEndY = y(0); // 직전 단계의 "끝 값" Y

    steps.forEach((s, i)=>{
      const x = P.left + i * (barW + gap);
      let barY, barH, start, end;

      if (s.type==='total') {
        start = 0; end = s.val;  // 총계는 0~값 영역(시각화 용도)
        barY = y(end);
        barH = y(0) - barY;
        run  = s.val;
      } else {
        start = run;
        end   = run + s.val;
        const y1 = y(start), y2 = y(end);
        barY = Math.min(y1, y2);
        barH = Math.max(1, Math.abs(y2 - y1));
        run  = end;
      }

      // ▣ 막대 (★ Y는 그대로 barY, 보정식 삭제)
      const rect = document.createElementNS('http://www.w3.org/2000/svg','rect');
      rect.setAttribute('x', x);
      rect.setAttribute('y', barY);
      rect.setAttribute('width', barW);
      rect.setAttribute('height', barH);
      rect.setAttribute('rx', 6);
      rect.setAttribute('fill', s.color);
      svg.appendChild(rect);

      // 값 라벨
      const vt = document.createElementNS('http://www.w3.org/2000/svg','text');
      vt.setAttribute('x', x + barW/2);
      let labelY = (s.type==='delta' && s.val < 0) ? (barY + barH + 16) : (barY - 8);
      if (labelY < P.top) labelY = barY + 16;
      vt.setAttribute('y', labelY);
      vt.setAttribute('text-anchor','middle');
      vt.setAttribute('font-size','12');
      vt.setAttribute('fill','#0f172a');
      vt.textContent = `${s.type==='delta' && s.val>0 ? '+' : ''}${F(s.val)}억`;
      svg.appendChild(vt);

      // 항목 라벨
      const lt = document.createElementNS('http://www.w3.org/2000/svg','text');
      lt.setAttribute('x', x + barW/2);
      lt.setAttribute('y', H - 28);
      lt.setAttribute('text-anchor','middle');
      lt.setAttribute('font-size','12');
      lt.setAttribute('fill','#334155');
      lt.textContent = s.label;
      svg.appendChild(lt);

      // ─ 연결선 (★ 직전 "끝 값" 기준 수평선)
      if (i > 0) {
        const line = document.createElementNS('http://www.w3.org/2000/svg','line');
        line.setAttribute('x1', x - gap);
        line.setAttribute('x2', x);
        line.setAttribute('y1', prevEndY);
        line.setAttribute('y2', prevEndY);
        line.setAttribute('stroke', '#cbd5e1');
        line.setAttribute('stroke-dasharray', '4 2');
        svg.insertBefore(line, svg.firstChild);
      }
      // 다음 단계의 끝 Y 갱신
      prevEndY = (s.type==='total') ? y(s.val) : y(run);
    });

    // 7) 요약
    summaryEl.innerHTML =
      `과세표준 <b>${F(BASE)}억</b> → 최종세액 <b>${F(NET)}억</b> → 보유현금 차감 후 <b class="gap-amount">부족액 ${F(GAP)}억</b>`;
    console.log("draw() 함수 성공적으로 완료 v7-sim");
  } catch (e) {
    console.error("그래프 그리기 오류:", e);
    summaryEl.textContent = "그래프를 그리는 중 오류가 발생했습니다: " + e.message;
  }
}

    // --- 이벤트 리스너 설정 ---
    if (drawButton) { drawButton.addEventListener('click', draw); }
    if (presetButton) {
        presetButton.addEventListener('click', ()=>{
            Object.keys(defaultValues).forEach(key => {
                if ($(inputIds[key])) $(inputIds[key]).value = defaultValues[key];
            });
            draw(); // 프리셋 로드 후 바로 그리기
        });
    }
    if (downloadButton) { /* PNG 저장 로직 (이전과 동일) */
        downloadButton.addEventListener('click', ()=>{
            if (!svg) { console.error("SVG 요소를 찾을 수 없습니다."); return; }
            const vb = svg.viewBox.baseVal;
            const VBW = vb?.width || 960; const VBH = vb?.height || 360;
            svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');
            svg.style.backgroundColor = '#ffffff';
            try {
                const svgStringSource = new XMLSerializer().serializeToString(svg);
                const svgString = svgStringSource.replace(/<\?xml.*?\?>|<!DOCTYPE.*?>/g, '').trim();
                svg.style.backgroundColor = ''; svg.removeAttribute('preserveAspectRatio');
                if (!svgString) throw new Error("SVG 문자열 생성 실패");
                const blob = new Blob([svgString], { type: 'image/svg+xml;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const img = new Image();
                img.onload = function(){
                    const c = document.createElement('canvas'); const scaleFactor = 2;
                    c.width = VBW * scaleFactor; c.height = VBH * scaleFactor;
                    const ctx = c.getContext('2d');
                    ctx.fillStyle = '#ffffff'; ctx.fillRect(0, 0, c.width, c.height);
                    ctx.scale(scaleFactor, scaleFactor);
                    try {
                        ctx.drawImage(img, 0, 0, VBW, VBH);
                        const a = document.createElement('a'); a.download = 'gap-waterfall.png';
                        a.href = c.toDataURL('image/png'); a.click();
                    } catch (e) { console.error("캔버스 drawImage 오류:", e); alert("PNG 저장 중 캔버스 오류."); }
                    finally { URL.revokeObjectURL(url); }
                };
                img.onerror = function(e) { console.error("이미지 로드 실패:", e); alert("PNG 이미지 생성 실패."); URL.revokeObjectURL(url); }
                img.src = url;
            } catch (e) { console.error("PNG 저장 프로세스 오류:", e); alert("PNG 저장 오류: " + e.message); if (svg.style.backgroundColor === 'rgb(255, 255, 255)') { svg.style.backgroundColor = ''; } if (svg.hasAttribute('preserveAspectRatio')) { svg.removeAttribute('preserveAspectRatio'); } }
        });
    }
    // 입력 필드 변경 시 자동 계산
    Object.values(inputIds).forEach(id => { const el = $(id); if (el) { el.addEventListener('input', () => { try { const T = parseFloat($(inputIds.total).value) || 0; const D = parseFloat($(inputIds.deduct).value) || 0; const GT = parseFloat($(inputIds.grosstax).value) || 0; const CR = parseFloat($(inputIds.taxcr).value) || 0; const CH = parseFloat($(inputIds.cash).value) || 0; const BASE = Math.max(T - D, 0); const NET = Math.max(GT - CR, 0); const GAP = Math.max(NET - CH, 0); $(resultIds.base).value = F(BASE); $(resultIds.nettax).value = F(NET); $(resultIds.gap).value = F(GAP); if (summaryEl) { summaryEl.innerHTML = `과세표준 <b>${F(BASE)}억</b> → 최종세액 <b>${F(NET)}억</b> → 보유현금 차감 후 <b class="gap-amount">부족액 ${F(GAP)}억</b>`; } } catch (e) { console.error("결과 업데이트 중 오류:", e); } }); } });

    // --- 초기화 ---
    function initialize() {
        Object.keys(defaultValues).forEach(key => {
            if ($(inputIds[key])) $(inputIds[key]).value = defaultValues[key];
        });
        try {
            const T = defaultValues.total; const D = defaultValues.deduct; const GT = defaultValues.grosstax;
            const CR = defaultValues.taxcr; const CH = defaultValues.cash;
            const BASE = Math.max(T - D, 0); const NET = Math.max(GT - CR, 0); const GAP = Math.max(NET - CH, 0);
            $(resultIds.base).value = F(BASE); $(resultIds.nettax).value = F(NET); $(resultIds.gap).value = F(GAP);
            if (summaryEl) { summaryEl.innerHTML = `과세표준 <b>${F(BASE)}억</b> → 최종세액 <b>${F(NET)}억</b> → 보유현금 차감 후 <b class="gap-amount">부족액 ${F(GAP)}억</b>`; }
        } catch(e) { console.error("초기 계산 오류:", e); if (summaryEl) summaryEl.textContent = "초기값 계산 중 오류 발생"; }
        draw(); // ★ 초기 그리기
    }

    initialize(); // 초기화 및 첫 그리기 실행

})();

</script>

</body>
</html>